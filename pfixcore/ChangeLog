2003-04-09  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/util/CheckIncludes.java: new class. This is work in progress.
	It will be used to check for unused includes, maybe automatically deleting them and producing 
	text excerpts from include parts and other stuff.
	* example/core/build/unused.xsl: also part of this stuff...

2003-04-09 Joerg Haecker <haecker@schlund.de>

	* docs/Pustefix_testing_guide.txt: improved
	
	* example/core/editor/txt/pages/main_testcaseoverview.xml
	* src/de/schlund/pfixcore/editor/resources/CRTestcaseImpl.java:
	application specific changes.
	
	* src/de/schlund/pfixxml/testenv/ConsoleTestClient.java:
	removed spaghetti command line. Most command-line parameters
	are optional now. If not given, default values will be used.
	
	* src/de/schlund/pfixxml/testenv/TestClient.java: added more
	debugging info.

>>>>>>> 1.60
2003-04-08 Joerg Haecker <haecker@schlund.de>

	* src/de/schlund/pfixcore/editor/handlers/TestcaseDeleteHandler.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseOverviewHandler.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseResetHandler.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseStartHandler.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseSelectHandler.java
	* src/de/schlund/pfixcore/editor/resources/CRTestcase.java
	* src/de/schlund/pfixcore/editor/resources/CRTestcaseImpl.java
	* example/core/editor/txt/pages/main_testcaseoverview.xml
	* example/core/editor/txt/pages/main_testcaseselect.xml
	* example/core/editor/txt/pages/main_testcasestart.xml:
	application specific changes

	* src/de/schlund/pfixxml/testenv/ConsoleTestClient.java
	* src/de/schlund/pfixxml/testenv/RecordManager.java
	* src/de/schlund/pfixxml/testenv/RecordManagerException.java
	* src/de/schlund/pfixxml/testenv/RecordManagerFactory.java
	* src/de/schlund/pfixxml/testenv/TestClient.java
	* src/de/schlund/pfixxml/testenv/TestClientException.java
	* src/de/schlund/pfixxml/testenv/TestcasePlaybackResult.java
	* src/de/schlund/pfixxml/testenv/TestcaseStepResult.java:
	smaller changes, added java-doc

	* example/testenv/log4jconf.xml: added simple log4j config
	for ConsoleTestClient

	* docs/Pustefix_testing_guide.txt: added and started

2003-04-03 Joerg Haecker <haecker@schlund.de>

	* src/de/schlund/pfixxml/IncludeDocumentExtension.java(get): Track the
	dependencies if exceptions occur. Catch them, track the dependency and
	throw them again.

	* example/core/editor/conf/config.prop.in: removed ugly finalizers for
	testcase-app.
	* example/core/editor/txt/pages/main_home.xml
	* example/core/editor/txt/pages/main_testcaseoverview.xml
	* example/core/editor/txt/pages/main_testcaseselect.xml
	* example/core/editor/txt/pages/main_testcasestart.xml: gui changes

	* src/de/schlund/pfixxml/testenv/ConsoleTestClient.java
	* src/de/schlund/pfixxml/testenv/TestcasePlaybackResult.java
	* src/de/schlund/pfixxml/testenv/TestcaseStepResult.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseDeleteHandler.java
	* src/de/schlund/pfixcore/editor/interfaces/TestcaseDelete.iwrp: added

	* src/de/schlund/pfixcore/editor/handlers/TestcaseOverviewHandler.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseResetHandler.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseSelectHandler.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseStartHandler.java
	* src/de/schlund/pfixcore/editor/interfaces/TestcaseSelect.iwrp
	* src/de/schlund/pfixcore/editor/interfaces/TestcaseStart.iwrp
	* src/de/schlund/pfixcore/editor/resources/CRTestcase.java
	* src/de/schlund/pfixcore/editor/resources/CRTestcaseImpl.java:  application specific changes
	
	* src/de/schlund/pfixxml/testenv/RecordManager.java
	* src/de/schlund/pfixxml/testenv/TestClient.java: changes

	* src/de/schlund/pfixcore/editor/handlers/TestcaseOverviewFinalizer.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseSelectFinalizer.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseStartFinalizer.java: removed

2003-04-03  Jens Lautenbacher  <jtl@schlund.de>

	* example/servletconf/projects.xml: 
	* example/core/build/create_serverxml.xsl: added a new config parameter for the server.xml: 
	connectorport. If not given, it will default to 8009.

	* src/de/schlund/pfixxml/ServletManager.java (registerSession): not simply uuse the last two digits,
	but instead the part after the last "." from the session id as a suffix to the visit_id.

2003-04-02  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/exceptionhandler/PFConfigurationException.java: 
	* src/de/schlund/pfixxml/exceptionhandler/ExceptionHandler.java: 
	* src/de/schlund/pfixxml/exceptionhandler/PropertyManager.java: 
	* src/de/schlund/pfixxml/testenv/TestClientException.java: 
	* src/de/schlund/pfixxml/testenv/RecordManagerException.java: 
	* src/de/schlund/pfixxml/testenv/TestClient.java: make it compile with java 1.4
	Basically just renaming "getCause" methods to non conflicting name "getExceptionCause".
	This should be ported to the real 1.4 api as soon as we have completed the switch.

2003-03-31  Martin Leidig  <mleidig@schlund.de>
        * example/core/build/create_propfiles.xsl: fixed some bugs concerning transformation
        of new property file format, i.e. getting prefix for pagerequest parameters within
        custom choose/test elements, adding support for choose/test elements within
        servletinfo tag.

2003-03-27  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/testenv/RecordManager.java
	(RecordManager): some changes to help with weird errors on certain
	machines (jserv only??)  Still don't really know the cause, but
	changed some stuff nevertheless: DocumentBuilderFactory is now
	inited statically. We don't force a saxxon DOM anymore.  We don't
	use complicated xpath stuff to simply check an attribute in the
	top level element.  The attribute "recodmode_allow" is no longer
	used. We simple check for "record_dir", and if it's there, the
	recordmode is allowed, if not recordmode is forbidden.

	Removed some instances of RecordManagerException... If just
	catching perfectly legal Exceptions, what is the point to NOT throw them, instead wrap
	them in a new Exception type? This will not work like this anyway for 1.4.1 IIRC.

	(writeDocument): use an FileOutputStream, not a FileWriter. see below.
	
2003-03-25  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/workflow/Context.java (addNavigation): rewrote the 
	handling of non-autoinvalidating the navigation: We store a HashMap now which may
	contain the status of the pages from the last time. This can be reused.
	(recursePages): also hand the navigation status HashMap when autoinvalidate != true.
	Try to reuse status from this map.

	* src/de/schlund/pfixcore/util/MakeStatusMessageXML.java (writeFile): don't 
	use a FileWriter, as we can't set the encoding there!!!! 
	We ABSOLUTELY need to make sure that this bug isn not present anywhere else!!!

2003-03-24  Joerg Haecker <haecker@schlund.de>

	* src/de/schlund/pfixxml/testenv/TestClient.java: formserial
	is deleted by code, no stylesheet needed any more.

	* src/de/schlund/pfixxml/testenv/RecordManager.java: code cleanup

	* src/de/schlund/pfixxml/AbstractXMLServer.java: Debug code + xsl
	parameter changes for editconsole.

	* src/de/schlund/pfixcore/editor/handlers/TestcaseResetHandler.java
	* src/de/schlund/pfixcore/editor/interfaces/TestcaseReset.iwrp: added

	* example/core/editor/conf/config.prop.in
	* example/core/editor/txt/navigation.xml
	* example/core/editor/txt/pages/main_home.xml
	* example/core/editor/txt/pages/main_testcaseoverview.xml
	* example/core/editor/txt/pages/main_testcaseselect.xml
	* example/core/editor/txt/pages/main_testcasestart.xml
	* example/core/xsl/include.xsl.in
	* src/de/schlund/pfixcore/editor/handlers/TestcaseSelectFinalizer.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseSelectHandler.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseStartFinalizer.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseStartHandler.java
	* src/de/schlund/pfixcore/editor/resources/CRTestcase.java
	* src/de/schlund/pfixcore/editor/resources/CRTestcaseImpl.java:
	changes for play-back of recorded testcases in editor.
	
2003-03-21  Joerg Haecker <haecker@schlund.de>

	* src/de/schlund/pfixxml/AbstractXMLServer.java: removed code
	making decisions on record mode. Moved this code to RecordManager.
	Now the record manager is configured for each servlet(depend.xml).
	Only one global property left to enable or disable record mode.

	* src/de/schlund/pfixxml/testenv/RecordManager.java
	* src/de/schlund/pfixxml/testenv/TestClient.java: changes for
	integration into pustefix cms.

	* src/de/schlund/pfixcore/editor/resources/EditorRes.java:
	added method for retrieving CR for testcases.

	* src/de/schlund/pfixcore/editor/EditorProductFactory.java
	* src/de/schlund/pfixcore/editor/EditorProduct.java: store path
	to depend.xml in EditorProduct.

	* example/core/editor/txt/pages/main_testcaseoverview.xml
	* example/core/editor/txt/pages/main_testcaseselect.xml
	* example/core/editor/txt/pages/main_testcasestart.xml
	* src/de/schlund/pfixcore/editor/handlers/TestcaseOverviewFinalizer.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseOverviewHandler.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseSelectFinalizer.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseSelectHandler.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseStartFinalizer.java
	* src/de/schlund/pfixcore/editor/handlers/TestcaseStartHandler.java
	* src/de/schlund/pfixcore/editor/interfaces/TestcaseOverview.iwrp
	* src/de/schlund/pfixcore/editor/interfaces/TestcaseSelect.iwrp
	* src/de/schlund/pfixcore/editor/interfaces/TestcaseStart.iwrp
	* src/de/schlund/pfixcore/editor/resources/CRTestcase.java
	* src/de/schlund/pfixcore/editor/resources/CRTestcaseImpl.java: 
	 added pages, handlers, finalizers, iwrapper and contextresource for test case
	 handling in pustefix cms.

	* example/sample1/conf/depend.xml.in
	* example/core/editor/txt/navigation.xml
	* example/core/build/create_depend.xsl
	* example/core/editor/conf/depend.xml.in
	* example/core/editor/conf/config.prop.in : adjusted.

	* example/common/conf/pustefix.prop.in: removed recordmode_logdir
	  property

	* src/de/schlund/pfixxml/testenv/RecordManagerFactory.java: added,
	RecordManagers are created by this factory. For every depend.xml one
	RecordManager is created.

	* src/de/schlund/pfixcore/workflow/app/IHandlerContainer.java
	* src/de/schlund/pfixcore/workflow/app/IWrapperContainer.java
	* src/de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java: minor

	* example/testenv/log4jconf.xml: added. Sample log4j config for
	TestClient running in terminal.

	* NOTE: Testcase handling in pustefix cms ready for production use yet!

2003-03-21  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/SessionCleaner.java (storeSPDocument): remove the boolean stattask parameter, 
	add the int timeout. We unconditionally create TimerTask, but can specify different timeout values.

	* example/common/conf/pustefix.prop.in: set the property sessioncleaner.timeout to 20 for mode=prod and
	600 for mode=test.

	* src/de/schlund/pfixxml/AbstractXMLServer.java (initValues): read another property 
	sessioncleaner.timeout to specify how long the timeout for removing the SPDocument should be.

2003-03-20  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/serverutil/NoCopySessionData.java: new
	dummy interface. Use to mark all classes whose objects shouldn't
	be copied from one session to another, new one (for the jump
	NON_SSL => SSL)
	* src-jserv/de/schlund/pfixxml/serverutil/jserv/ModernJServUtil.java (copySessionData): 
	* src-tomcat4/de/schlund/pfixxml/serverutil/tomcat4/TomcatUtil.java (copySessionData): use this here for an instance of check.
	* src/de/schlund/pfixxml/SPDocument.java (SPDocument): implement the interface.

	* src/de/schlund/pfixxml/AbstractXMLServer.java (process): call SessionCleaner.storeSPDocument() to store the doc into the session. 
	Use editmodeAllowed as the last parameter so the stored SPDocuments will not be removed when also editMode is allowed (this is for 
	development purposes: in development mode we want to have the stored SPDocument always there for debugging)

	* src/de/schlund/pfixxml/SessionCleaner.java (SessionCleanerTask): new class. This class starts a Timer thread that removes 
	stored SPDocuments from sessions after a certain timeout (currently 30 secs). This should greatly improve our memory usage, as these docs won't 
	hang around 'till the session finally expires when the user stops clicking.

	* example/core/xsl/forminput.xsl.in: really make selective display of errors via paramref work.

2003-03-19  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/workflow/app/DefaultAuthIWrapperState.java (auxEchoData): also echo all "__anchor"
	parameters.

2003-03-18  Joerg Haecker <haecker@schlund.de>

	* example/core/xsl/include.xsl.in: changes in editconsole
	for recording

2003-03-18  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/utils.xsl.in: per advice from mleidig@schlund.de: return false 
	in the javascript call in pfx:switch. This fixes a lot of annoying problems.

2003-03-07  Joerg Haecker <haecker@schlund.de>

	* Added graphical management for record mode:
	* example/core/xsl/include.xsl.in: changes
	* src/de/schlund/pfixxml/AbstractXMLServer.java: changes
	* example/core/img/player_[pause|play].png: added

2003-03-07  Jens Lautenbacher  <jtl@schlund.de>

	* example/INSTALL.ps: new file. Is made downloadable via a
	DirectOutputState.

	* example/servletconf/projects.xml: add the /xml/download servlet
	to the sample1 project (it's a  DirectOutputServlet).

	* example/sample1/conf/depend.xml.in: 
	* example/sample1/txt/pages/main_home.xml: made relevant changes
	for the new "install" page.

	* src/de/schlund/pfixcore/workflow/AuthContext.java
	(checkAuthorization): new mthod, refactored to be accessible from
	the outside.

	* example/sample1/conf/direct.prop.in: new file, example
	DirectOutputServlet property file. 

	* src/de/schlund/pfixxml/DirectOutputServlet.java: new
	servlet. This servlet requests the Context from a already running
	(in the same session) ContextXMLServer and supplies the
	ContextResourceManager to DirectOutputStates, which stream the
	output for the PageRequests handled by this servlet directly to
	the outputstream of the HttpServletResponse.

	* src/de/schlund/pfixcore/workflow/DirectOutputPageMap.java: new
	class, maps PageRequests to DirectOutputStates.

	* src/de/schlund/pfixcore/workflow/DirectOutputState.java: new
	interface. Implementors stream their own output directly to the outputstream.

	* src/de/schlund/pfixcore/workflow/DirectOutputStateFactory.java:
	new class. Manages DirectOutputStates

	* src/de/schlund/pfixcore/workflow/app/FileDownloadDOState.java:
	new class. Example DirectOutputState to download static files.

2003-03-06  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/SPDocument.java (SPDocument): removed get/setLiteralResponseContent(...)
	This was stupid idea to begin with.

2003-03-06  Joerg Haecker <haecker@schlund.de>

	* src/de/schlund/pfixcore/workflow/app/*: organized imports,
	removed unused variables and added some javadoc.

2003-03-05  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/forminput.xsl.in: (<pfx:errorbox/>) 
	just show one matching label when using <pfx:paramref>

	* META-INF/pfixcore.version: released 0.2.8, started 0.2.9-pre

	* src/de/schlund/pfixcore/workflow/Context.java: just add some
	(commented-out) logging lines

	* src/de/schlund/pfixcore/workflow/PageRequestProperties.java (toString): new method.

	* src/de/schlund/pfixcore/workflow/app/IHandlerContainer.java: 
	(initIHandlers): use the page's properties as a parameter, not the context
	(isPageAccessible):
	(areHandlerActive):
	(needsData): hand over the context as a method parameter.

	* src/de/schlund/pfixcore/workflow/app/IHandlerContainerManager.java (getIHandlerContainer): 
	throw Exceptions if something goes wrong.
	call initIHandlers(Properties props) on the created IHandlerContainer.
	
	* src/de/schlund/pfixcore/workflow/app/IHandlerSimpleContainer.java (IHandlerSimpleContainer): 
	Fixed a big big race where we stored the Context (!!!!) inside the
	IHandlerContainer despite the fact that these guys are supposed to
	be valid for every Context using the same set of properties
	(IHandlerContainerManager is nowadays handled by the
	PropertyObjectManager). This was really really bad. We now do all
	the initialization once with the help of the given properties, and
	don't store anything related to the session any more. The Context
	is handed to the relevant methods from the outside (see above for the interface change).
	(initIHandlers): 
	(isPageAccessible):
	(areHandlerActive):
	(needsData): changed accordingly

2003-03-04  Joerg Haecker <haecker@schlund.de>

	* META-INF/pfixcore.version: released 0.2.7(0.2.6 skipped);
	started 0.2.8-pre

2003-03-04  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/SPDocument.java (SPDocument): removed
	set/getXmlObject(). We store the tinytree just inplace of the
	original Document.
	(get/setLiteralResponseContent): HACK! provide for storing the literal
	response content instead of some XML data tree. This needs more in AbstractXMLServer to work.

	* src/de/schlund/pfixxml/AbstractXMLServer.java (process): remove all traces of get/setXmlObject
	as noted above, just use get/setDocument() instead.

	* src/de/schlund/pfixcore/workflow/app/DefaultIWrapperState.java
	(isAccessible): removed call to IHandlerContainer.initIHandlers(...). 
	The IHandlerContainerManager already takes care of that one time when creating the IHandlerContainer.

2003-03-04  Joerg Haecker <haecker@schlund.de>

	* example/core/editor/conf/config.prop.in: changed editmode allow to
	false

2003-03-03  Joerg Haecker <haecker@schlund.de>

	* src/de/schlund/pfixxml/*: code cleanup - removed unused variables
	and organized imports.

	* src/de/schlund/pfixxml/FactoryInitServlet.java,
	src/de/schlund/pfixxml/PfixServletRequest.java: added some javadoc

2003-02-28  Joerg Haecker <haecker@schlund.de>

	* example/core/build/create_propfiles.xsl: bugfix

	* src/de/schlund/pfixxml/testenv/RecordManager.java: small changes
	and improvements.
	* src/de/schlund/pfixxml/testenv/TestClient.java: conformed to above
	changes.
	* src/de/schlund/pfixxml/AbstractXMLServer.java: conformed to above
	changes.

	* src/de/schlund/pfixxml/xpath/PFXPathEvaluator.java: code cleanup

	* src/de/schlund/pfixxml/targets/TraxXSLTProcessor.java(x[s|m]lObjectFromDisc):
	more information on errors.

2003-02-26  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/example/TShirtHandler.java
	(handleSubmittedData): add an example for using StatusCodes with arguments.

	* src/de/schlund/pfixcore/generator/IWrapperParamInfo.java: 
	(getArgsForStatusCode): new method. Return the String[] array holding the arguments
	for this StatusCode (or null).
	(addScode): add another parameter (String[] args) for adding scodes with arguments.
	Old calling scheme is still valid.

	* src/de/schlund/pfixcore/generator/IWrapperIndexedParam.java 
	(addScode): add another parameter (String[] args) for adding scodes with arguments.
	Old calling scheme is still valid.

	* src/de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java 
	(addErrorCodes): added handling of StatusCodes that have arguments attached.

	* src/de/schlund/pfixxml/ResultForm.java: 
	(addStatusCode) add another parameter (String[] args) for adding scodes with arguments. 
	Old calling scheme is still valid.

	* src/de/schlund/pfixxml/ResultDocument.java: 
	(createIncludeFromStatusCode) add another parameter (String[] args) 
	for adding scodes with arguments. Old calling scheme is valid too.

	* example/core/build/iwrapper.xsl: now we add addSCodeWithArgs<PARAMNAME> methods, too, for
	every parameter of the IWrapper.

	* example/core/xsl/default_copy.xsl: cop $__env through all nodes.
	This way you can simultate something like a "dynamic binding" by
	using apply-templates with a paramter "__env" which has a nodeset containing
	the data bound to it. All templates using apply-templates (or call-templates) should 
	be restructured to accept and apply this __env parameter. (some may want to set __env 
	not to a supplied value but to something own).

	* example/core/xsl/include.xsl (<pfx:argref>): new template.
	(<pfx:include>): now we use any <pfx:arg> subnodes as the __env
	parameter when using apply-templates on the new included
	xml-part. $__env is copied through all nodes handled by the
	default_copy.xsl default rule.

2003-02-26  Joerg Haecker <haecker@schlund.de>

	* src/de/schlund/pfixxml/AbstractXMLServer.java: added
	restricted mode for sending plain xml. Clients which
	want to retrieve plain xml must be listed in config file.
	Code cleanup: Made more functions and added ifXXXEnabled 
	for debug output.

	* example/common/conf/pustefix.prop.in: changed xmlonly
	to restricted in prod. mode.

2003-02-25  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/workflow/app/RequestDataImpl.java
	(addData): removed methods. Removed handling of __DATA:Key:Value:
	sections in parameter names. see below.

	* src/de/schlund/pfixxml/PfixServletRequest.java (checkParameterNameForEmbeddedData): 
	new method. Moved the scanning for __DATA:KEY:VAL: strings in
	parameter names from RequestDataImpl into this method. now we can
	handle those __DATA sections transparently everywhere.

2003-02-14 Joerg Haecker <haecker@schlund.de>

	* lib/jcert.jar; lib/jnet.jar; lib/jsse.jar: added
	for TestClient to handle SSL.

	* src/de/schlund/pfixxml/testenv/RecordManager.java:
	changed format of output files.

	* src/de/schlund/pfixxml/testenv/TestClient.java: added
	SSL support.

2003-02-19  Joerg Haecker <haecker@schlund.de>

	* src/de/schlund/pfixxml/targets/SPCacheFactory.java(init):
	Info  about initialized caches printed.
	
	* src/de/schlund/pfixxml/targets/TargetImpl.java(getCurrValue):
	now the mod-time of the target is checked against the mod-time
	of the according file in disk cache. If the file in disk cache
	is newer, the target will reread its value from disk.
	
2003-02-18  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/build/create_propfiles.xsl: changed again the
	format of the propertyfiles (only the <servletinfo> tag). See the
	updated documentation for details)
	* docs/Servlet-Propertyfiles.txt: updated to new format.
	* example/sample1/conf/secure.prop.in: 
	* example/sample1/conf/config.prop.in: 
	* example/core/editor/conf/config.prop.in: updated

2003-02-17  Joerg Haecker <haecker@schlund.de>

	* src/de/schlund/pfixcore/util/MultiTransform.java:
	More detailed message on errors.

	* example/common/conf/pustefix.prop.in: added properties
	for skipping getModTimeMaybeUpdate.

	* src/de/schlund/pfixxml/AbstractXMLServer.java(initValues): analyze above
	properties and configure TargetGenerator accordingly.
	* src/de/schlund/pfixxml/AbstractXMLServer.java(handleDocument):
	ignored transformer exceptions are not printed with whole stack trace
	any more.

	* src/de/schlund/pfixxml/targets/TargetGenerator.java: added flag
	with getter and setter determining if getModTimeMaybeUpdate should be
	skipped.(Note: in the main method getModTimeMaybeUpdate must not be
	skipped!!)

	* src/de/schlund/pfixxml/targets/TargetImpl.java(getValue):
	does not call getModTimeMaybeUpdate if above property is set
	and target was generated once (indicated by flag 
	onceGenerated). Increases performance in production mode.

2003-02-15  Jens Lautenbacher  <jtl@schlund.de>

	* META-INF/pfixcore.version: started 0.2.6-pre

2003-02-14  Jens Lautenbacher  <jtl@schlund.de>

	* META-INF/pfixcore.version: released 0.2.5

	* src/de/schlund/pfixcore/workflow/ContextResourceManager.java
	(init): Eeeek. fix a bug where the resources were not init'ed in
	the correct order.

2003-02-13  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/build/create_propfiles.xsl: implemented new xml
	format for the prop.in files (documentation follows tomorrow).
	* example/sample1/conf/secure.prop.in: 
	* example/sample1/conf/config.prop.in: 
	* example/core/editor/conf/config.prop.in: use it.

2003-02-13  Joerg Haecker <haecker@schlund.de>
	
	* src/de/schlund/pfixcore/util/email/EmailSender[Exception].java:
	added classes for sending mail via JavaMail-API
	
	* src/de/schlund/pfixxml/testenv/RecordManager[Exception].java:
	added classes for recording requests and its corresponding results in
	XML.
	* src/de/schlund/pfixxml/testenv/TestClient[Exception].java:
	added simple console application to play-back the recorded data.
	
	* example/testenv/default.xsl: added needed stylesheet by TestClient.
	
	* example/common/conf/pustefix.prop.in: added properties needed by
	the RecordManager.

	* src/de/schlund/pfixxml/AbstractXMLServer.java: added support for
	RecordManager.

	* lib/commons-httpclient-2.0-alpha2.jar and lib/commons-logging.jar:
	added cause needed by TestClient.

	* Makefile.local: changed accordingly.

	* src/de/schlund/pfixxml/targets/TraxXSLTProcessor.java: minor

	* src/de/schlund/pfixxml/IncludeDocument.java: instanciating
	Xerces-DocumentBuilderFactoryImpl directly. Removed clumpsy
	system properties.

2003-01-30  Jens Lautenbacher  <jtl@schlund.de>

	* META-INF/pfixcore.version: released 0.2.4

	* example/core/xsl/utils.xsl.in: (pfx:layer_check) use pfx:on/node() instead of pfx:on, same for pfx:off.

2003-01-29  Jens Lautenbacher  <jtl@schlund.de>

	* META-INF/pfixcore.version: released 0.2.3
	start 0.2.4-pre

2003-01-28  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/workflow/ContextResourceManager.java (init): make a second, separate loop ovr
	the contextressources to call init() on them. So all CRs are instantiated first, THEN they a init'ed.

	* src/de/schlund/pfixcore/workflow/app/StaticState.java
	(PROP_INSERTCR): change from "resdocfinalizer.insert" =>
	"insertcr" *** CAUTION *** this means that all property files have
	to be changed accordingly...
	* example/sample1/conf/config.prop.in: changed accordingly. 

	* src/de/schlund/pfixxml/ContextXMLServer.java (ContextXMLServer):
	cosmetics, don't check for contextclassname more often than
	needed.

	* src/de/schlund/pfixcore/workflow/ContextResourceManager.java (ContextResourceManager): cosmetics

	* src/de/schlund/pfixcore/workflow/Context.java (do_update): new method (was the reset method)
	(reset): don't do the work anymore, just register a needs_update status.
	(handleRequest): check if do_update needs to be called.

2003-01-28  Martin Leidig  <mleidig@schlund.de>

	* src/de/schlund/pfixxml/ContextXMLServer.java: added attributes
	contextClassName and contextMap
	(init): set contextClassName
	(tryReloadProperties): set contextClassName, compare old to new and
	then iterate over Contexts and reset them resp. remove Contexts from 
	contextMap
	(getContext): removed reset parameter, now creates new context and adds
 	it to contextMap, if context value is null or if contextclass has 
	changed (getContext)

	* src/de/schlund/pfixcore/workflow/Context.java: made reset method
	synchronized

2003-01-27  Joerg Haecker  <haecker@schlund.de>

	* src/de/schlund/pfixxml/targets/TraxXSLTProcessor.java: removed almost
	all xalan supporting code. Documentation added. Small improvement.

2003-01-27  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/workflow/Context.java (getName): return the supplied name.
	(getPropertyLoadIndex): removed 
	(init): new parameter name.
	(reset_internal):  removed
	(reset): now handles all reset, as the reload flag for the NavigationFactory is gone.

	* src/de/schlund/pfixxml/AbstractXMLServer.java (tryReloadProperties): also return the value of generator.tryReinit when
	properties didn't change.

	* src/de/schlund/pfixxml/targets/TargetGenerator.java (tryReinit): return true when depend.xml was reloaded.

	* src/de/schlund/pfixcore/workflow/NavigationFactory.java (getNavigation): remove force_load flag, now
	the factory checks the modtimes itself and reloads if necessary

	* src/de/schlund/pfixcore/workflow/PageMap.java: 
	* src/de/schlund/pfixcore/workflow/PageRequestProperties.java: indentation (tab->spaces)

	* src/de/schlund/pfixcore/workflow/app/DefaultIWrapperState.java
	(getIHandlerContainer): use IHandlerContainerManager instead of IHandlerContainerFactory

	* src/de/schlund/pfixcore/workflow/app/IHandlerSimpleContainer.java (updateIHandlers): remove automatic updating
	(isPageAccessible): 
	(areHandlerActive): 
	(needsData): remove up-to-date check

	* src/de/schlund/pfixxml/PropertyObjectManager.java: 
	* src/de/schlund/pfixxml/PropertyObject.java: just tab->spaces

	* src/de/schlund/pfixcore/workflow/app/IHandlerContainerFactory.java: removed class

	* src/de/schlund/pfixcore/workflow/app/IHandlerContainerManager.java (IHandlerContainerManager): Added class

	* src/de/schlund/pfixxml/ContextXMLServer.java (makeContextName): added.
	(getContext): use it.

	* src/de/schlund/pfixxml/AppContext.java (init): now supply a name argument from the caller
	

2003-01-24  Joerg Haecker  <haecker@schlund.de>

	* src/de/schlund/pfixxml/xpath/PFXPathEvaluatorFactory.java,
	* src/de/schlund/pfixxml/xpath/PFXPathEvaluatorImplSaxon.java,
	* src/de/schlund/pfixxml/xpath/PFXPathEvaluatorImplXalan.java:
	removed
	* example/common/conf/factory.prop.in: removed PFXPathEvaluatorFactory
	* src/de/schlund/pfixxml/xpath/PFXPathEvaluator.java: added. 
	Wrapperclass for calling saxons xpath-api.
	* src/de/schlund/pfixxml/IncludeDocumentExtension.java:
	now uses PFXPathEvaluator for xpath evaluation.
	* src/de/schlund/pfixcore/util/Meminfo.java: cosmetics.

2003-01-24  Martin Leidig <mleidig@schlund.de>

	* src/de/schlund/pfixxml/PropertyObjectManager.java: 
	new class, which adds support for sharing objects (built from 
	properties) between contexts
	* src/de/schlund/pfixxml/PropertyObject.java: 
	new interface, classes have to implement it to get managed by 
	PropertyObjectManager
	* src/de/schlund/pfixxml/ContextXMLServer.java: 
	inserted call of PropertyObjectManager's resetPropertyObjects 
	method (tryReloadProperties)
	* src/de/schlund/pfixcore/workflow/Context.java: 
	PageFlowManager, PageRequestProperties and PageMap aren't newly 
	created any more, now the context gets them from 
	PropertyObjectManager (reset_internal)
	* src/de/schlund/pfixcore/workflow/PageFlowManager.java: 
	constructor replaced by init method to implement PropertyObject 
	interface, removed dispensable synchronized statements
	* src/de/schlund/pfixcore/workflow/PageRequestProperties.java: 
	constructor replaced by init method to implement PropertyObject 
	interface, moved Properties construction into init method
	* src/de/schlund/pfixcore/workflow/PageMap: 
	constructor replaced by init method to implement PropertyObject 
	interface, references PageRequestProperties via PropertyObjectManager

2003-01-24  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/build/create_serverxml.xsl: added customizable maxProcessors
	* example/servletconf/projects.xml: Use it.

2003-01-23  Joerg Haecker <haecker@schlund.de>

	* CVSROOT/cvswrappers: added entry for gifs and jars as binary data.

2003-01-23  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/workflow/Context.java: Bugfix. only init helper classes one time.

2003-01-12  Volker Zaich <zaich@schlund.de>

	* src/de/schlund/pfixcore/editor/EditorDocumentation.java
	* src/de/schlund/pfixcore/editor/CoreDocumentation.java
	* src/de/schlund/pfixcore/editor/handlers/DocumentationFinalizer.java
	Bug fixed

	* docs/documentation_tree.xml
	The XML-Structure of the documentation
	* docs/Using_Documentation.txt
	How to use documentation in Pustefix

	* example/core/editor/xsl/custommaster.xsl
	* example/core/editor/xsl/metatags.xsl
	* example/core/editor/txt/pages/main_documentation.xml
	Layout changing
	
	* example/sample1/xsl/metatags.xsl.in
	

2003-01-10  Jens Lautenbacher  <jtl@schlund.de>

	CAUTION: this incompatible change removes ResdocFinalizers from
	StaticState.  Also it moves the functionality to insert
	ContextResources from ResdocSimpleFinalizer into the
	StaticState. The DefaultIWrapperState and descendants are the only
	States now to use ResdocFinalizers.
	
	* src/de/schlund/pfixcore/workflow/app/ResdocFinalizer.java: 
	* src/de/schlund/pfixcore/workflow/app/ResdocSimpleFinalizer.java:
	moved renderContextResources to StaticState.java

	* src/de/schlund/pfixcore/workflow/app/StaticState.java: 
	(renderContextResources): moved here (from ResdocSimpleFinalizer.java)
	moved getResdocFinalizer to DefaultIWrapperState.
	
	* src/de/schlund/pfixcore/workflow/app/DefaultIWrapperState.java (DefaultIWrapperState): 
	changed to call the inherited renderContextResources itself.
	(getResdocFinalizer): moved from StaticState.

2003-01-10  Joerg Haecker <haecker@schlund.de>

	* docs/FAQ: added.
	* src/de/schlund/pfixxml/IncludeDocument.java (createDocument):
	detailed error-message printed to logfile and console on
	SAXParseExceptions. 
	* src/de/schlund/pfixxml/IncludeDocumentExtension.java: code cleanup

2003-01-07  Volker Zaich <zaich@schlund.de>

	* example/Makefile
	Makefile modified. Now all *.xsl.in will be transformed
	in *.xsl

2003-01-07  Joerg Haecker  <haecker@schlund.de>

	* started 0.2.3-pre
	* released 0.2.2
	* src/de/schlund/pfixxml/targets/TraxXSLTProcessor.java (tinyTreeFromDocument):
	return null if a null-document is passed as param. 

2003-01-02  Jens Lautenbacher  <jtl@schlund.de>

	* released 0.2.1
	* started 0.2.2-pre

2002-12-19  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/AbstractXMLServer.java (handleDocument):
	use a StringBuffer for the traillog entry, also log URI +
	QueryString
	* src/de/schlund/pfixxml/ServletManager.java (registerSession): use a StringBuffer.

2002-12-18  Jens Lautenbacher  <jtl@schlund.de>

	* META-INF/pfixcore.version: started version 0.2.1-pre

	* src/de/schlund/pfixcore/editor/handlers/ImagesUploadHandler.java (handleSubmittedData): 
	guard for empty file uploads

2002-12-18 Joerg Haecker <haecker@schlund.de>
	
	* META-INF/pfixcore.version: released version 0.2.0
	* src/de/schlund/pfixxml/IncludeDocumentFactory.java: minor changes

2002-12-16  Joerg Heacker <haecker@schlund.de>

	* example/servletconf/projects.xml:(see entry from thomas below)
	* src/de/schlund/pfixxml/IncludeDocumentFactory.java:
	IncludeDocumentFactory now caches IncludeDocuments with a mutable
	or immutable DOM.
	* src/de/schlund/pfixxml/IncludeDocumentExtension.java: now uses
	immutable DOM from Factory.
	* src/de/schlund/pfixxml/IncludeDocument.java: IncludeDocument 
	now can be created with a [im]mutable DOM representation. 
	* src/de/schlund/pfixcore/editor/EditorHelper.java(getIncludeDocument): Can handle 
	[im]mutable DOMs now.

2002-12-16  Volker Zaich <zaich@schlund.de>
        
        * example/core/xsl/forminput.xsl.in
	* example/core/xsl/include.xsl.in
	* example/core/xsl/navigation.xsl.in
	* example/core/xsl/utils.xsl.in

	removed all <value></value> tags in the documentation-tree
	value will be set by the Id
	
	* example/core/editor/xsl/metatags.xsl
	* example/servletconf/projects.xml
	* src/de/schlund/pfixcore/editor/CoreDocumentation.java
	* src/de/schlund/pfixcore/editor/EditorDocumentation.java
        * src/de/schlund/pfixcore/editor/EditorProductFactory.java
	* src/de/schlund/pfixcore/editor/handlers/DocumentationFinalizer.java

	all xsl:temlates tags will be displayed. If they don't have a
	documentation-tree, they won't have a link, but a ! (e.g. !pfx:button)
	
	the active Docuemtation-Element now is marked.
	
	
2002-12-16  Thomas Stieler  <stieler@schlund.de>

	* example/servletconf/projects.xml: 
	* example/core/build/create_tomcatweb.xsl: 
	
	added a node <active/> for each <servlet/> node, the servlet
	is enabled only it if the value of the node is "true".
	Adapted the example projects.xml.

2002-12-12  Jens Lautenbacher  <jtl@schlund.de>
	* JOINED with SAXON branch!
	
	* src/de/schlund/pfixxml/targets/PublicXSLTProcessor.java (xmlObjectFromDocument): return Document again.
	* src/de/schlund/pfixxml/targets/PustefixXSLTProcessor.java (xmlObjectFromDisc): ditto
	* src/de/schlund/pfixxml/targets/TraxXSLTProcessor.java (xmlObjectFromDocument): ditto
	(xmlObjectFromDisc): ditto

	* src/de/schlund/pfixxml/SPDocument.java (toString): use the xmlobject (if != null) if the document is null

	* src/de/schlund/pfixxml/AbstractXMLServer.java (process): try to
	kill the old xerces Dom in the SPDocument after we converted it to
	TinyTree (or any other XmlObject). Hope it works...

	* src/de/schlund/pfixcore/util/MultiTransform.java (MultiTransform): just stopped some log4j grief

2002-12-11  Volker Zaich <zaich@schlund.de>

	* src/de/schlund/pfixcore/editor/CoreDocumentation.java
	The Documentation Objects helds all the information

	* src/de/schlund/pfixcore/editor/handlers/DocumentationHandler.java
	Documentation Handler

	* src/de/schlund/pfixcore/editor/handlers/DocumentationFinalizer.java
	Finalizer for Documentation

	* src/de/schlund/pfixcore/editor/interfaces/Documentation.iwrp
	iwrp for Documentation

	* example/core/editor/conf/config.prop.in
	documentation edit

	* example/core/editor/txt/navigation.xml
	* example/core/editor/txt/styles.xml
	* example/core/editor/txt/pages/main_documentation.xml
	* example/core/editor/txt/pages/main_pages.xml
	* example/core/editor/xml/three_frames_doku.xm
	* example/core/editor/xsl/metatags.xsl
	* example/core/xsl/forminput.xsl.in
	* example/core/xsl/navigation.xsl.in
	* example/core/xsl/utils.xsl.in
	* example/sample1/txt/pages/main_home.xml
	* example/servletconf/projects.xml

	* src/de/schlund/pfixcore/editor/EditorDocumentation.java
	* src/de/schlund/pfixcore/editor/EditorProduct.java
	* src/de/schlund/pfixcore/editor/EditorProductFactory.java
	* src/de/schlund/pfixcore/editor/resources/EditorSessionStatusImpl.java

	Documentation Handling added in Functions and Stylesheetz
	

2002-12-06  Volker Zaich <zaich@schlund.de>

	* /example/core/xsl/navigation.xsl.in
	pfx:elink - Another Error-Handling built in. Questionmark is not
	allowed in the href attribute
	
2002-12-05  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/ResultDocument.java (init): added
	xmlns:pfx="..." namespace attribute to root elem

	* example/core/xsl/include.xsl.in: added pfx:editconsole. Allows switching to/from editmode
	and showing the last DOM tree.

2002-12-04  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/AbstractXMLServer.java (handleDocument): 
	if property xmlserver.noxmlonlyallowed=false (default is true) and the request param
	__xmlonly=1 is given, just return the DOM tree as text/xml

2002-12-03  Jens Lautenbacher  <jtl@schlund.de>

	* META-INF/pfixcore.version: released 0.1.19, started 0.1.20-pre

2002-12-02  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/targets/TargetGenerator.java (loadConfig): rewrote completely. 2-3 times faster now.

2002-11-25  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/ServletManager.java (forceRedirectBackToInsecureSSL):
	(forceNewSessionSameVisit):
	(doCookieTest):
	(getSecureSessionCookie): new methods.
	(redirectToSecureSSLSession): changed to be able to reuse an existing secure SSL session
	if a request comes in with an -invalid- session id that was the parent of this secure session.
	This may happen when ever one goes back to old pages via the back button.
	previously a new session and a new visit were created, now we simply continue with the right
	session. All this is guarded by sending a secure cookie to check if the request comes from the
	authorized browser. See the code for more, as it's heavily commented.

	* src/de/schlund/pfixxml/serverutil/SessionAdmin.java (idWasParentSession): added
	(getChildSessionForParentId): added.
	(valueUnbound): changed to record also the parent session id if a secure SSL session is created.

	* src/de/schlund/pfixxml/serverutil/ContainerUtil.java: 
	* src-jserv/de/schlund/pfixxml/serverutil/jserv/ModernJServUtil.java: 
	* src-tomcat4/de/schlund/pfixxml/serverutil/tomcat4/TomcatUtil.java: 
	encodeURL(String scheme, String host, HttpServletRequest req, HttpServletResponse res, String sessid): added 
	method to be able to use a explicitely specified session id.
	
	* example/servletconf/projects.xml: added context running under ssl

	* example/sample1/conf/depend.xml.in: added page ssltest

	* example/core/xsl/forminput.xsl.in: fixed dokumentation

	* example/common/conf/pfixlog.xml.in: adapted to logging changes

	* example/sample1/txt/pages/main_ssltest.xml: new file
	* example/sample1/conf/secure.prop.in: new file 
	* example/sample1/conf/server.crt: new file 
	* example/sample1/conf/server.key: new file 

2002-11-25 Volker Zaich <zaich@schlund.de>

	* example/core/editor/xml/three_frames_doku.xml
	three_frames_doku.xml: Frames for Documentation (added)
	
	* example/core/editor/xsl/metatags.xsl
	Documentation included

2002-11-25  Volker Zaich <zaich@schlund.de>

	* example/common/conf/exceptionhandler.prop.in
	* example/common/conf/factory.prop.in
	* example/common/conf/pfixlog.xml.in
	* example/common/conf/pustefix.prop.in

	* example/core/build/create_depend.xsl
	* example/core/build/create_documentation.xsl
	* example/core/build/create_lib.xsl
	* example/core/build/create_stylesheet.xsl

	* example/core/editor/conf/config.prop.in
	* example/core/editor/conf/depend.xml.in

	* example/core/xsl/default_copy.xsl.in
	* example/core/xsl/forminput.xsl.in
	* example/core/xsl/include.xsl.in
	* example/core/xsl/master.xsl.in
	* example/core/xsl/navigation.xsl.in
	* example/core/xsl/utils.xsl.in

	* example/sample1/conf/config.prop.in
	* example/sample1/conf/depend.xml.in

	* example/servletconf/projects.xml

	Namespaced changed from: xmlns:cus="http://www.schlund.de/pustefix/customize/create
	to xmlns:cus="http://www.schlund.de/pustefix/customize
				
2002-11-22  Jens Lautenbacher  <jtl@schlund.de>

	* released 0.1.18
	
	* example/core/xsl/navigation.xsl.in: Massive Speed-Ups ~10x ....

2002-11-22  Volker Zaich <zaich@schlund.de>
	
	* example/core/xsl/include.xsl.in
	Bug fixed --> IncludeDocumentationExtension
	
2002-11-22  Jens Lautenbacher  <jtl@schlund.de>

	* released 0.1.17

	* src/de/schlund/pfixxml/ServletManager.java
	(tryReloadProperties): increment a loadindex (and put it into the
	properties) each time we reload the property files.

	* src/de/schlund/pfixxml/AbstractXMLServer.java (process): print
	some timing info, removed latency measurement

	* src/de/schlund/pfixcore/workflow/app/IHandlerSimpleContainer.java (updateIHandlers): new method.
	will b called automatically each time to check if the properties have changed and reeinit if true. 

	* src/de/schlund/pfixcore/workflow/PageRequestProperties.java (getPropertiesForPageRequest): 
	we cache the properties for each pagerequest now.

	* src/de/schlund/pfixcore/workflow/Context.java
	(getPropertyLoadIndex): new method. returns a number which is
	incremented each time the properties are reloaded.
	(invalidateNavigation): new method. allows for invalidating the
	navigation (this applies only if navgation.autoinvalidate is set to false in
	the properties. default is true)
	(checkForNavigationReuse): new method. checks is autoinvalidate is true or false.
	(addNavigation): we cache the navigation node and will reuse it if autoinvalidate is false and 
	invalidateNavigation() has not been called. this is not the default!

	* src/de/schlund/pfixcore/editor/handlers/IncludesUploadHandler.java (handleSubmittedData): 
	removed latency measurement
	

2002-11-20  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/utils.xsl.in: added pfx:layer_check, optional child of pfx:switch.
	If given, it expects an attribute name (a layer id) and two subnodes, pfx:on and pfx:off.
	The content of pfx:on will be shown if the named layer is visible, pfx:off will be shown if it
	is hidden.
	* example/core/script/baselib.js: Add the needed infrastructure
	* example/sample1/txt/pages/main_home.xml: use it.

2002-11-18  Jens Lautenbacher  <jtl@schlund.de>
	* released 0.1.16, started 0.1.17-pre
	
	* example/core/build/create_products.xsl: 
	small fix. xpath expressions in "select" should not end in a "/". 

	* src/de/schlund/pfixxml/AbstractXMLServer.java: 
	* src/de/schlund/pfixxml/targets/PublicXSLTProcessor.java: 
	* src/de/schlund/pfixxml/targets/PustefixXSLTProcessor.java: 
	* src/de/schlund/pfixxml/targets/XMLVirtualTarget.java: 
	* src/de/schlund/pfixxml/targets/XSLVirtualTarget.java: 
	* src/de/schlund/pfixxml/targets/LeafTarget.java: 
	* src/de/schlund/pfixxml/targets/TraxXSLTProcessor.java: 
	* src/de/schlund/pfixxml/targets/XMLLeafTarget.java: 
	* src/de/schlund/pfixxml/targets/VirtualTarget.java 
	* src/de/schlund/pfixxml/targets/XSLLeafTarget.java: 
	Code cleanup. Most significant part is that we now have only one
	method for the xslt transform, regardless if it is a target
	generating or a html generating one (applyTrafoForOutput)

	There is still work to do: see TraxXSLTProcessor for comments.
	
2002-11-15  Joerg Haecker <haecker@schlund.de>

	* src/de/schlund/pfixxml/targets/VirtualTarget.java 
	(getModTimeMaybeUpdate): Added double-checked locking.

	* src/de/schlund/pfixxml/targets/TraxXSLTProcessor.java 
	(doApplyTrafo): removed synchronisation on result.
	(X[M|S]LTargetfromDisc: removed synchronisation on target.

2002-11-14  Joerg Haecker <haecker@schlund.de>

	* src/de/schlund/pfixcore/editor/EditorHelper.java
	(getIncludeDocument): We really must do a cloneNode
	before removing incpath.
	
	* src/de/schlund/pfixxml/targets/SPCacheFactory.java: minor.
	
	* src/de/schlund/pfixxml/IncludeDocumentFactory.java: minor.
	
	* src/de/schlund/pfixxml/IncludeDocument.java (resetModTime):
	now this does modTime -= 1.
	
	* src/de/schlund/pfixxml/targets/PustefixXSLTProcessor.java:
	changed X[S|M]LTargetfromDisk(String) to X[S|M]LtargetFromDisk(Target,
	String).
	
	* src/de/schlund/pfixxml/targets/SharedLeaf.java,
	src/de/schlund/pfixxml/targets/LeafTarget.java, 
	src/de/schlund/pfixxml/targets/Target.java,
	src/de/schlund/pfixxml/targets/TargetImpl.java (resetModTime):
	removed.
	
	* src/de/schlund/pfixxml/targets/TraxXSLTProcessor.java:
	(doApplyTrafo): synchronized on result.
	(X[S|M]LTargetfromDisk) synchronized on target.
	
	* src/de/schlund/pfixxml/targets/VirtualTarget.java:
	(resetModTime) removed. 
	Removed GENERATE_LOCK used for synchronisation.
	
	* src/de/schlund/pfixxml/targets/X[M|S]LLeafTarget.java:
	adjusted call to xsltproc.X[S|M]LTargetfromDisc.
	
	* src/de/schlund/pfixxml/targets/X[M|S]LVirtualTarget.java
	(getValueFromDiscCache): removed GENERATE_LOCK, adjusted 
	call to xsltproc.X[S|M]LTargetfromDisc.


2002-11-13  Volker Zaich <zaich@schlund.de>
	* example/servletconf/projects.xml
	Documentation-Files-Path added

	* example/core/build/make_products.xsl
	xsl for Generating Documentation-Files-Path added

	* example/core/xsl/utils.xsl.in
	Documentation for utils.xsl.in added

	* src/de/schlund/pfixcore/editor/EditorProduct.java
	Documentation-Handling added

	* src/de/schlund/pfixcore/editor/EditorProductFactory.java
	Documentation-Handling added
	(reads the documentation-files and calls EditorDocumentation.java)

	
	
2002-11-13  Jens Lautenbacher  <jtl@schlund.de>
	    Joerg Haecker <haecker@schlund.de>
	
	* src/de/schlund/pfixxml/targets/TraxXSLTProcessor.java (TraxXSLTProcessor): 
	made a singleton.
	(TraxXSLTProcessor): private.
	(getInstance): new method.

	(doApplyTrafo): completely removed storing the generated object into the memory cache.
	we only stream the result to disk (or to the client in the last step).

	* src/de/schlund/pfixxml/AbstractXMLServer.java (handleDocument): changed to use
	TraxXSLTProcessor.getInstance()

	* src/de/schlund/pfixxml/targets/TargetImpl.java (generateValue): removed! 

	* src/de/schlund/pfixxml/targets/LeafTarget.java (getModTimeMaybeUpdate): 
	just invalidate the Memory Cache here as generateValue is gone.
	(generateValue): removed 

	* src/de/schlund/pfixxml/targets/X[S|M]L[Virtual|Leaf]Target.java (getValueFromDiscCache): 
	don't store the value, don't check the modtime.
	changed to use TraxXSLTProcessor.getInstance()
	(generateValue): removed 
	
	* src/de/schlund/pfixxml/targets/VirtualTarget.java (generateValue): 
	put method from XML/XSL VirtualTarget here.

2002-11-13  Volker Zaich  <zaich@schlund.der>
	* src/de/schlund/pfixcore/editor/EditorDocumentation.java
	class reads the documentation-nodelist and put it into
	a hashmap
	
2002-11-07  Joerg Haecker <haecker@schlund.de>

	* src/de/schlund/pfixxml/targets/SPCache.java: added 
	methods getCapacity and getSize to interface.

	* src/de/schlund/pfixxml/targets/SimpleCache.java:
	* src/de/schlund/pfixxml/targets/LRUCache.java:
	* src/de/schlund/pfixxml/targets/NullCache.java:
	implemented the two methods above.


2002-11-05  Joerg Haecker <haecker@schlund.de>

	* src/de/schlund/pfixxml/targets/LRUCache.java: bugfix: 
	create a new CacheLRU in default constructor with default capacity 
	now. Cause: NullPointerException when doing 'make generate'.

2002-11-05  Joerg Haecker <haecker@schlund.de>

	* src/de/schlund/pfixxml/targets/PustefixXSLTProcessor.java:
	added method Object XMLTargetfromDisc(String path) to this interface.
	
	* src/de/schlund/pfixxml/targets/TraxXSLTProcessor.java:
	implemented XMLTargetfromDisc.

	* src/de/schlund/pfixxml/targets/XMLLeafTarget.java:
	getValueFromDiscCache gets its document now from TraxXSLTProcessor.

	* src/de/schlund/pfixxml/targets/XMLVirtualTarget.java:
	getValueFromDiscCache gets its document now from TraxXSLTProcessor.

	* src/de/schlund/pfixxml/IncludeDocumentExtension.java: minor

2002-11-04  Joerg Haecker <haecker@schlund.de>

	* example/core/build/create_serverxml.xsl:
	set attributes minProcessors="200", maxProcessors="750" and
	acceptCount="100" for Connector needed cluster operation

2002-11-04  Volker Zaich <zaich@schlund.de>

	* example/core/xsl/navigation.xsl.in
	error-handling added in pfx:elink

	* example/core/txt/styles.xml
	added new css-element: core_xml_errorbox

2002-11-04  Joerg Haecker  <haecker@schlund.de>

	* src/de/schlund/pfixxml/targets/SPCache.java: added method
	createCache(int capacity)
	
	* src/de/schlund/pfixxml/targets/NullCache.java: removed 
	constructor NullCache(Properties). Implemented createCache(int
	capacity)
	
	* src/de/schlund/pfixxml/targets/SimpleCache.java: removed
	constructor SimpleCache(Properties). Implemented createCache(int
	capacity)
	
	* src/de/schlund/pfixxml/targets/LRUCache.java: removed
	constructor LRUCache(Properties). Implemented createCache(int
	capacity)
	
	* src/de/schlund/pfixxml/targets/SPCacheFactory.java: now this factory
	creates one cache for targets and one for include-documents.
	
	* src/de/schlund/pfixxml/IncludeDocument.java: IncludeDocument
	represents a single IncludeDocument now. Functionality of old class
	IncludeDocument moved to IncludeDocumentExtension (see below)
	
	* src/de/schlund/pfixxml/IncludeDocumentExtension.java: added. All
	calls from XSL to get data from IncludeDocuments is handled via 
	this class. IncludeDocuments come from IncludeDocumentFactory now, not
	from TargetGenerator
	
	* src/de/schlund/pfixxml/IncludeDocumentFactory.java: added. IncludeDocuments
	are created and stored in a SPCache by this factory.

	* example/common/conf/factory.prop.in: added properties
	'targetcache.cacheclass' and 'targetcache.cachecapacity' for
	target-cache. Added properties 'includecache.cacheclass' and
	'includecache.cachecapacity' for include-document-cache.

	* example/core/build/create_stylesheet.xsl: xmlns:include now points
	to de.schlund.pfixxml.IncludeDocumentExtension.

	* src/de/schlund/pfixcore/editor/EditorHelper.java: IncludeDocumets
	now come from IncludeDocumentFactory instead of TargetGenerator.
	
2002-10-30  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/workflow/app/ResdocSimpleFinalizer.java (ResdocSimpleFinalizer): 
	Eeeek. really need to render the ContextResources if staying on the page.

2002-10-30  Thomas Stieler  <stieler@schlund.de>

	* src/de/schlund/pfixcore/workflow/app/ResdocSimpleFinalizer:
	check, if an ContextResource to be inserted is found, otherwise throw XMLException

2002-10-29  Jens Lautenbacher  <jtl@schlund.de>

	* META-INF/pfixcore.version: released 0.1.16, started 0.1.16-pre

	* src/de/schlund/pfixcore/workflow/Context.java (isCurrentPageRequestInCurrentFlow): 
	new method. used to check if the current page request is member of the current pageflow.
	
	* src/de/schlund/pfixcore/workflow/app/ResdocSimpleFinalizer.java (onSuccess): 
	CAUTION ICOMPATIBLE CHANGE: rewrote logic for deciding what to do in the onSuccess case: 
	Default: If the current pagerequest is member of the
   	         current pageflow (aka: if it is a member of any pageflow), 
	         set the SPDocument to null (signalling that the pageflow should continue).
	         If it is not a memeber of a flow, return a SPDocument (and continue on the current page).
	You can overwrite this behaviour with the property "pagerequest.<PAGENAME>.resdocfinalizer.onsuccess".
	The values "continue", "stop" and "auto"(default) are allowed.
	         

2002-10-24  Jens Lautenbacher  <jtl@schlund.de>

	* Makefile (LANG): use LANG=C as a workaround for RedHat 8.0s standard
	use of utf-8 and javas inability to cope with it
	* example/Makefile: ditto.

2002-10-24  Joerg Haecker <haecker@schlund.de>

	* src/de/schlund/pfixxml/targets/XMLVirtualTarget.java:
	synchronized the call of generateValue and getValueFromDiscCache
	with a private instance-variable.

	* src/de/schlund/pfixxml/targets/XSLVirtualTarget.java:
	same as above

	Refactoring stuff in following files. Renamed some
	fields, strings and methods from leave to leaf. 
	* example/core/conf/generator_tree.xml
	* src/de/schlund/pfixcore/editor/EditorHelper.java
	* src/de/schlund/pfixxml/IncludeDocument.java
	* src/de/schlund/pfixxml/XMLServer.java
	* src/de/schlund/pfixxml/targets/LeafTarget.java
	* src/de/schlund/pfixxml/targets/SharedLeafFactory.java
	* src/de/schlund/pfixxml/targets/TargetGenerator.java
	* src/de/schlund/pfixxml/targets/TargetType.java
	* src/de/schlund/pfixxml/targets/XMLLeafTarget.java
	* src/de/schlund/pfixxml/targets/XMLVirtualTarget.java
	* src/de/schlund/pfixxml/targets/XSLLeafTarget.java
	* src/de/schlund/pfixxml/targets/XSLVirtualTarget.java

2002-10-24  Joerg Haecker <haecker@schlund.de>
	
	* src/de/schlund/pfixxml/targets/LeaveTarget.java:
	renamed to LeafTarget.java
	
	* src/de/schlund/pfixxml/targets/SharedLeave.java:
	renamed to SharedLeaf.java
	
	* src/de/schlund/pfixxml/targets/SharedLeaveFactory.java:
	renamed to SharedLeafFactory
	
	* src/de/schlund/pfixxml/targets/XMLLeaveTarget.java:
	renamed to XMLLeafTarget

	* src/de/schlund/pfixxml/targets/XSLLeaveTarget.java:
	renamed to XSLLeafTarget

	* src/de/schlund/pfixxml/targets/TargetType.java:
	now we use the renamed classes above

	* startTomcat.sh: modified to start tomcat in debug mode

2002-10-24  Rouven Schoeller <rouven@schlund.de>
	* example/core/editor/xsl/metatags.xsl
	Insert a reference to the release notes ( s. next)

	* example/core/editor/txt/pages/main_home.xml
	Add release notes for the editor applet, including a reference to the Java Download page.

2002-10-21  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/editor/xsl/metatags.xsl: don't do form submit from JScript, just return true...
	

2002-10-18  Thomas Stieler  <stieler@schlund.de>

	* example/core/build/create_serverxml.xsl: 
	set attributes maxProcessors="750" and acceptCount="800" for Connector needed cluster operation

2002-10-18  Rouven Schoeller <rouven@schlund.de>
	* example/core/script/xmlEditorApplet.jar	
	The editor applet must be compiled with Java 1.4 as opposed to pustefix.
	Hence we check in the applet ready to run.

	* editorapplet/src/de/schlund/pfixeditor/XmlEditorApplet.java
	Moved the DummyScreen workaround to 
	editorapplet/src/de/schlund/pfixeditor/view/Gui.java
	
	* editorapplet/src/org/gjt/sp/jedit/textarea
	Moved the DummyScreen workaround to 
	editorapplet/src/de/schlund/pfixeditor/view/Gui.java

	* editorapplet/src/de/schlund/pfixeditor/view/Gui.java
	The DummyScreen workaround, which ensures that the textarea 
	gets the focus for key events, is now implemented here. 
	As result, there should appear only one dummy frame, when running in a browser.

	* example/core/editor/xsl/metatags.xsl
	add style attribute display:none to the textarea, 
	which was displayed as empty space by the browser.
	
2002-10-17  Volker Zaich <zaich@schlund.de>
	* example/core/xsl/navigation.xsl.in

	modified the <pfx:elink> tag
	Now it's possible to use dynamic-external links
	Add <pfx:host> instead of the href-Attribut.
	
2002-10-16  Rouven Schoeller <rschoeller@schlund.de>

	* example/core/editor/xsl/metatags.xsl
	add an applet tag for the pustefix editor applet combined 
	with a javascript function getAppletText().
	In the case of an upload, getAppletText will put the user's 
	modified text into the html textarea. 
	The html textarea becomes hidden.

	* example/core/editor/xml/three_frames_applet.xml
	new frame declaration, which hosts the editor applet. 
	It includes a javascript function which forwards 
	resize events to the editor applet.   
	
	* example/core/editor/conf/depend.xml.in
	the standart pages 'includes' and 'commons' use now 
	'three_frames_applet.xml', mentioned above.

	* editorapplet
	hosts the editor applet project and consists of the directories 'src' and 'res'. 
	In 'res', you can find a script for signing the applet and a manifest file, 
	which is needed for generating the applets jar file.
	Type 'make install' to integrate a signed applet in pustefix.  

	* src/de/schlund/pfixcore/editor/handlers/IncludesUploadHandler.java
	insert encode/decode functionality. The uploaded text needs to be decoded, 
	and accordingly the requested text must be encoded. 
	The text for the applet is supplied in the applet tag as a param. 
	Therefore, we want to avoid stuff like <LF> and '"' in the supplied text. 
	
2002-10-15  Jens Lautenbacher  <jtl@schlund.de>

	* example/common/conf/factory.prop.in: 
	add property editorproductfactory.delayinit=false if mode=prod.
	
	* src/de/schlund/pfixcore/editor/EditorProductFactory.java (init): 
	delay reading of all products if property
	editorproductfactory.delayinit is not set to false.
	(getAllEditorProducts):
	(getEditorProduct): do it here if neccessary.

2002-10-14  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/master.xsl.in: wrong namespace for
	cus:documentation.  This is complete rubbish. We have
	http://www.schlund.de/pustefix/customize/ and
	http://www.schlund.de/pustefix/customize/create and both use
	prefix cus: normally, but unfortunately both are needed. Will need
	to check this some time.

2002-10-14  Joerg Haecker  <haecker@schlund.de>

	* example/common/conf/exceptionhandler.prop.in:
	modified values for NullPointerExceptions
	
2002-10-10  Joerg Haecker  <haecker@schlund.de>
	
	* changed max threads for tomcat to 150

2002-09-26  Thomas Stieler  <stieler@schlund.de>

	* src/de/schlund/pfixxml/ContextXMLServer.java: 
	* src/de/schlund/pfixxml/XMLServer.java: 
	implement needsSession() and allowSessionCreate()

	* src/de/schlund/pfixxml/ServletManager.java: 
	methods needsSession() and allowSessionCreate() are
	now abstract and must be implemented in inheriting, not
	abstract classes.

	* example/core/xsl/utils.xsl.in: 
	changed template pfx:switch, use href="javascript://" instead of
	href="#"

2002-09-23  Joerg Haecker <haecker@schlund.de>

	* example/core/build/create_serverxml.xsl: modified values 
	for Connector : AcceptCount=200, maxProcessors=250, minProcessors=50,
	enableLookups=false.

2002-09-23  Thomas Stieler  <stieler@schlund.de>

	* Makefile: 
	* example/Makefile: 
	Renamed target documentation_stylesheet -> stylesheets
	"make stylesheets" if building distribution (make dist)

	* example/core/build/create_apacheconf.xsl:
	check if apache-logdir is present in projects.xml, use
	"CustomLog <logfile> combined" instead of "TransferLog <logfile>"

2002-09-18 Volker Zaich <zaich@schlund.de>
	
	* src/de/schlund/pfixcore/util/MultiTransform.java:
	
	   (doDocumentation): added new function for a faster
	   generating of the documentation-stylesheets (see 2002-08-23)

	* example/Makefile:
             calls the new Java-Function for generating
	     the documentation-stylesheets

2002-09-12  Rouven Schller <rouven@schlund.de>
	* src/de/schlund/pfixxml/AbstractXMLServer.java
	(process): adjust code for logging the latency. Reason: page names 
	of the pustefix editor are not longer overgiven as request parameter,
	but can be find in the request path.

2002-09-11  Jens Lautenbacher  <jtl@schlund.de>

        * example/core/xsl/master.xsl.in: copy attributes for pfx:script

2002-09-10  Jens Lautenbacher  <jtl@schlund.de>

	* META-INF/pfixcore.version: started 0.1.13-pre

	* META-INF/pfixcore.version: released 0.1.12
	
	* src/de/schlund/pfixcore/workflow/Context.java
	(flowBeforeNeedsData): new method. Can be used to check if the
	pages which are located before the current page in the current
	workflow would return a SPDocument while the workflow runs (aka:
	if any page before the current one needs some more stuff to do)

	* example/core/xsl/master.xsl.in: bug fix: pfx:script really output script

	* src/de/schlund/pfixcore/workflow/app/IHandlerSimpleContainer.java
	(initIHandlers): init a new sub set of all active handlers. 
	This list contains all handlers which are not listed (as a space separated list) in the property
	ihandlercontainer.ignoreforactive.
	(areHandlerActive): use only the sub set defined above here.

2002-09-04  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/workflow/app/IHandlerContainerFactory.java (getIHandlerContainer): 
	removed debug of cache misses

	* src/de/schlund/pfixcore/workflow/ContextResourceManager.java (init): removed debug of properties

	* example/core/editor/xsl/metatags.xsl: <displaypartdetails>: displayed wrong product

2002-08-23  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/build/create_documentation.xsl: 
	* example/core/build/create_stylesheet.xsl: new files. Work in progress: we want to have
	inline documentation for the core stylesheets. The source files for those stylesheets are now 
	the files example/core/xsl/*.xsl.in. For each of them a corresponding *.xsl and a *.doc.xml file
	is produced which hold the XSLT content and the documentation. 

	* example/Makefile (%.xsl): 
	(%.doc.xml): Changed accordingly to make the transformations work

	* example/core/build/create_products.xsl: restored the ability to specifiy additional namespaces.

2002-08-21  Jens Lautenbacher  <jtl@schlund.de>

	* META-INF/pfixcore.version: released 0.1.11
	started 0.1.12-pre

2002-08-20  Jens Lautenbacher  <jtl@schlund.de>

	* docs/structural_xml_format.txt: new document.

	CAUTION! INCOMPATIBLE CHANGE:
	* example/core/xsl/master.xsl: 
	Changed the main format for the structural xml files. See documentation in 
	docs/structural_xml_format.txt
	* example/core/editor/xml/*.xml:
	* example/sample1/xml/*.xml:
	changed accordingly.
	
2002-08-18  Jens Lautenbacher  <jtl@schlund.de>

	CAUTION! INCOMPATIBLE CHANGE:
	* src/de/schlund/pfixcore/workflow/State.java (getDocument): changed return value from
	SPDocument to ResultDocument. 
	* src/de/schlund/pfixcore/workflow/Context.java (documentFromCurrentStep): 
	* src/de/schlund/pfixcore/workflow/StateImpl.java (getDocument): changed accordingly
	All States need this adjustement:
	* src/de/schlund/pfixcore/editor/handlers/SessionManagerState.java (getDocument): 
	* src/de/schlund/pfixcore/workflow/app/DefaultIWrapperState.java (getDocument): 
	* src/de/schlund/pfixcore/workflow/app/DefaultAuthIWrapperState.java (getDocument): 
	* src/de/schlund/pfixcore/workflow/app/StaticState.java (getDocument): 
	For StaticState, additionally remove the printing of the 
	RequestParameters. I hope nobody uses this, but if someone does,
	we now have better ways (using ContextResources) to insert
	information even in the case of StaticState.
	
2002-08-16  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/script/baselib.js (__js_getFormElement):
	(__js_getFormElementWithValue): new methods. You can get a form
	element by name, or (for the second method), by giving name +
	value

2002-08-14  Jens Lautenbacher  <jtl@schlund.de>

	CAUTION! These are substantial changes to the xsl core
	stylesheets! Test and treat it with care!

	* example/core/xsl/master.xsl: REMOVED the possibility to specify a @src attribute in a 
	<pfx:frame>. This did never work with Pfix II anyway, and the code becomes easier to understand.

	* example/core/xsl/include.xsl: 
          <xsl:template match="pfx:include" name="pfx:include">
	  CHANGED to encode the page in the pathinfo.	

	* example/core/xsl/navigation.xsl: 
	  <xsl:template name="pfx:button_impl">: REMOVED the possibility
   	    to define (in the navigation) handlers that contain a query
	    string. A handler now MUST be simple like /xml/static. 

	    REMOVED the possibility to give an onclick attribute to the <page> in the
	    navigation and have it handled here. This is simply never the right thing to do.

            CHANGED to encode the page in the pathinfo.

          <xsl:template match="pfx:wizardprevious">: CHANGED to encode the page in the pathinfo.


	* example/core/xsl/forminput.xsl: 
	  <xsl:teplate match="pfx:forminput">: CHANGED to encode the page in the pathinfo. 
	     
	    REMOVED handling of the @action attribute. Do we really need this anywhere?

	* META-INF/pfixcore.version: started 0.1.11-pre.

2002-08-13  Jens Lautenbacher  <jtl@schlund.de>

	* META-INF/pfixcore.version: released 0.1.10. Version number
	scheme is changed to become sane again -- no more leading zeros. 
	E.g. versions should have been 0.1.8 => 0.1.9 => 0.1.10 ...

	* src/de/schlund/pfixcore/workflow/PageRequest.java (PageRequest):
	changed so __page will take precedence before setting via the
	pathinfo. Maybe we will change this back sometime when more or
	less everything migrated to using the pathinfo method.

2002-08-12  Joerg Haecker   <haecker@schlund.de>

	* src/de/schlund/pfixxml/exceptionhandler/PFUtil.java: method sendMail
	removes now all new lines characters from mail subject before sending
	mail (pragmatic, did not find real reason).
	* src/de/schlund/pfixxml/exceptionhandler/PropertyManager.java: checks
	now if dimensions like min or hour are declared correctly in the
	property file.

2002-08-08  Joerg Haecker   <haecker@schlund.de>

	* src/de/schlund/pfixxml/exceptionhandler/ReportGeneratorTask.java:
	bugfix: subject of report mail was not in 24h format.
	* src/de/schlund/*: removed LGPL license as javadoc-comment. Added
	license as normal comment at beginning of each file. The two files
	src/de/schlund/pfixcore/util/UnixCrypt.java and
	/src/de/schlund/pfixxml/ImageInfo.java we cannot put under the LGPL.

2002-08-08  Thomas Stieler  <stieler@schlund.de>

	* example/core/build/create_apacheconf.xsl: 
	enabling/disabling ports with <cus:choose> is now possible

2002-08-08  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/util/UnixCrypt.java: 
	* src/de/schlund/pfixcore/util/PropertiesUtils.java: 
	* src/de/schlund/pfixcore/util/Meminfo.java: 
	copied from de.schlund.util, changed package. Removed cruft. Small changes.

	* *.java: changed accordingly...
	
2002-08-07  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/example/OverviewState.java: (getDocument) removed method. We now extend StaticState.

	* src/de/schlund/pfixcore/workflow/app/ResdocFinalizer.java (renderContextResources): added to interface. 

	* src/de/schlund/pfixcore/workflow/app/StaticState.java (getResdocFinalizer): added. 
	(getDocument): now we use a ResdocFinalizer here, too. We just call renderContextResources() on it.

	* src/de/schlund/pfixcore/workflow/app/DefaultIWrapperState.java (DefaultIWrapperState): remove getResdocFinalizer()

	* src/de/schlund/pfixcore/workflow/app/ResdocSimpleFinalizer.java (renderContextResources): make public.

	* example/core/xsl/include.xsl: again print missing includes to stdout.

	* src/de/schlund/pfixcore/workflow/app/ResdocSimpleFinalizer.java (renderContextResources): 
	new method. Put the functionality in it's own method which is being called by renderDefault(...)

	* example/core/xsl/include.xsl: jump to the right anchor in the
	left frame of the editor when first selecting an include to edit
	from the web page.

2002-08-07  Joerg Haecker  <haecker@schlund.de>

	* src/de/schlund/pfixxml/exceptionhandler/ExceptionConfig.java: 
	added class to encapsulate configuration of an exception.
	* src/de/schlund/pfixxml/exceptionhandler/GeneralConfig.java: 
	added class to encapsulate configuration of exceptionhandler.
	* src/de/schlund/pfixxml/exceptionhandler/MailConfig.java: 
	added class to encapsulate configuration of mail.
	* src/de/schlund/pfixxml/exceptionhandler/PFConfigurationException.java: 
	added exception that is thrown if configuartion includes errors.
	* src/de/schlund/pfixxml/exceptionhandler/PropertyManager.java:
	added class to handle all property stuff for exceptionhandler.
	* src/de/schlund/pfixxml/exceptionhandler/Cubbyhole.java: minor 
	* src/de/schlund/pfixxml/exceptionhandler/ExceptionContext.java: minor
	* src/de/schlund/pfixxml/exceptionhandler/ExceptionHandler.java:
	integration of new classes (see above).
	* src/de/schlund/pfixxml/exceptionhandler/InstanceCheckerContainer.java: minor
	* src/de/schlund/pfixxml/exceptionhandler/PFUtil.java: minor
	* src/de/schlund/pfixxml/exceptionhandler/PFXHandler.java: moved
	all property handling code to propertymanager(see above).
	* src/de/schlund/pfixxml/exceptionhandler/PFXThreadedHandler.java: minor
	* src/de/schlund/pfixxml/exceptionhandler/ReportGeneratorTask.java: minor
	* src/de/schlund/pfixxml/exceptionhandler/STraceCheckerContainer.java: minor
	* src/de/schlund/pfixxml/exceptionhandler/STraceCleanupTask.java: minor

2002-08-05  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/editor/xsl/metatags.xsl: add the handler to the page list.

	* META-INF/pfixcore.version: released 0.1.009,
	starting 0.1.010-pre

2002-08-05 Rouven Schoeller <rouven@schlund.de>
	
	* example/common/conf/pfixlog.xml.in
	two new log files: pustefix-latency-editor.log, 
	pustefix-latency.log 

	* example/core/editor/conf/config.prop.in
	set new property "latency" in order to activate the logging 
	of latency in AbstractXMLServer ( see next). 
	Just uncomment to deactivate logging.

	* src/de/schlund/pfixxml/AbstractXMLServer.java
	method process: 
	logs the duration of processing a request as well as 
	the rendering time for the response to file "pustefix-latency.log"

	* src/de/schlund/pfixcore/editor/handlers/IncludesUploadHandler.java
	method handleSubmittedData:
	logs the duration and result of the parsing to 
	file "pustefix-latency-editor.log".


2002-08-05  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/serverutil/SessionInfoStruct.java (SessionInfoStruct): 
	remove constructor without traillog arg.  Use old traillog if !=
	null. Do not copy elementwise, but just set this.traillog = traillog.

	* src/de/schlund/pfixxml/serverutil/SessionAdmin.java (registerSession(session, conutil)): 
	Just call registerSession(session, null, conutil)

2002-08-02  Joerg Haecker  <haecker@schlund.de>
	
	* src/de/schlund/pfixxml/serverutil/SessionInfoStruct.java: added
	constructor SessionInfoStruct(HttpSession, LinkedList trail,
	ContainerUtil). The data of trail is copied to internal traillog.
	* src/de/schlund/pfixxml/serverutil/SessionAdmin.java: added
	method registerSession(HttpSession, LinkedList trail, ContainerUtil).
	* src/de/schlund/pfixxml/ServletManager.java: calling
	registerSession(session, traillog, conutil) instead of
	registerSession(session, conutil) because we do not want to loose
	the traillog if we jump to ssl and invalidate the old session.
	* src/de/schlund/pfixxml/exceptionhandler/ExceptionContext.java: 
	corrected date presentation by setting timezone and locale.
	* src/de/schlund/pfixxml/exceptionhandler/PFXHandler.java:
	moved messages like "no rule matched" from mail subject to body.


2002-08-02  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/serverutil/SessionAdmin.java
	(getInstance): remove double lock idiom for getInstance(): now we
	create the instance when we declare the instance variable.

	* META-INF/pfixcore.version: starting 0.1.009-pre

	* example/core/xsl/navigation.xsl: changed the default behaviour
	for jsbuttons to the same as for buttons: We now need to give the
	attibute mode="desc" to both of them for having the behaviour that
	a button/jsbutton is active (that means: no link) when one of it's
	children is the current page. The former mode="self" is the
	default now.

	THIS IS AN INCOMPATIBLE CHANGE! but still shouldn't bite in too many
	places.

2002-08-02 Joerg Haecker    <haecker@schlund.de>

	* src/de/schlund/pfixxml/exceptionhandler/*: minor stuff:
	added some comments for javadoc, changed some access rights
	from public to package.

2002-08-01  Thomas Stieler  <stieler@schlund.de>

	* example/core/build/create_tomcatweb.xsl: create <error-page>
	elements in web.xml for tomcats servlet configuration

2002-08-01  Joerg Haecker <haecker@schlund.de>

	* src/de/schlund/pfixxml/exceptionhandler/ExceptionHandler.java: 
	a comment only
	* src/de/schlund/pfixxml/exceptionhandler/InstanceCheckerContainer.java:
	beautified report mail. Additional debug message. Bugfix( strace_obsolete
	was not interpreted properly)
	* src/de/schlund/pfixxml/exceptionhandler/PFXHandler.java: 
	beautified report mail.
	* src/de/schlund/pfixxml/exceptionhandler/ReportGeneratorTask.java: 
	beautified report mail.
	* src/de/schlund/pfixxml/exceptionhandler/STraceCheckerContainer.java: 
	minor change
	* src/de/schlund/pfixxml/exceptionhandler/STraceCleanupTask.java:
	cleanup-task does not send mails any more.

2002-08-01  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/build/create_tomcatweb.xsl (mode): changed url-pattern from /NAME to /NAME/*

	* META-INF/pfixcore.version: bumped to 0.1.008

	* src/de/schlund/pfixxml/ResultDocument.java: removed obsolete setTargetXSLKey(...) 

	* example/core/xsl/master.xsl: accept new parameter __servletpath

	* src/de/schlund/pfixxml/ServletManager.java (callProcess): set
	content type via public field DEF_CONTENT_TYPE instead of hardcoded value.

	* src-tomcat4/de/schlund/pfixxml/serverutil/tomcat4/TomcatUtil.java
	(getContextPath): new method. just use req.getContextPath();

	* src-jserv/de/schlund/pfixxml/serverutil/jserv/ModernJServUtil.java
	(getContextPath): just return ""

	* src/de/schlund/pfixxml/PfixServletRequest.java (getContextPath):
	new method. uses conUtil (see below)

	* src/de/schlund/pfixxml/serverutil/ContainerUtil.java
	(getContextPath): new method in interface. Needed because jserv
	has no req.getContextPath(), while tomcat has. 
	Jserv's getServletPath == Tomcat's getContextPath + Tomcat's getServletPath.

	* src/de/schlund/pfixxml/AbstractXMLServer.java (process): add
	another parameter for the xsl trafo: __servletpath which is
	preq.getContextPath() + preq.getServletPath(). We will need this
	when we start using the pathinfo for sending the requested
	pagename.
	(handleDocument): handle errorcode, headers and content type
	supplied via the spdoc.

	* src/de/schlund/pfixcore/workflow/PageRequest.java (PageRequest):
	added another way to give the pagename in the request: If the pagename is encoded in the 
	pathinfo, use this string instead of the __page parameter. E.g.
	/xml/static/foo;jsessionid=23423423423 would give a pagename of "foo".

	For this to work flawlessly we need more work in the xsl/xml part
	to finally stop using __page at all. For now it makes no problems
	as we never use pathinfo anyway.

	* src/de/schlund/pfixcore/workflow/Context.java (documentFromCurrentStep): 
	Changed the reaction on error conditions: If a PageRequest doesn't
	have a corresponding state, return a 404 in a new SPDocument (no other processing happens).
	If a PageRequest gives a State that is inaccessible, try again with first page of the defaultflow.
	if this is inaccessible, too, throw an Exception.

	* src/de/schlund/pfixxml/SPDocument.java (setResponseContentType): 
	(getResponseContentType): 
	(setResponseErrorText): 
	(getResponseErrorText): 
	(setResponseError): 
	(getResponseError): 
	(addResponseHeader): 
	(getResponseHeader): New methods. The will be used to call 
	similar methods in the HttpServletResponse. E.g. error handling:
	res.sendError(spdoc.getResponseError, spdoc.getResponseErrorText);
		- or -
	res.sendError(spdoc.getResponseError);
	The others work similar.	

2002-07-31 Joerg Haecker  <haecker@schlund.de>

	* src/de/schlund/pfixxml/exceptionhandler: added directory for package
	exceptionhandler.
	* src/de/schlund/pfixxml/exceptionhandler/*: refactoring stuff and bugfix
	for missing info in mail. 
	* example/common/conf/exceptionhandler.prop.in: minor configuration changes.
	* example/common/conf/factory.prop.in: adjusted property to find
	ExceptionHandler.
	* src/de/schlund/pfixxml/FactoryInitServlet.java: removed clumsy log4j-call
	in a loop for debugging issues.
	* src/de/schlund/pfixxml/PfixServletRequest.java: removed obsolete method
	* src/de/schlund/pfixxml/ServletManager.java: modified import for
	exceptionhandler.
	* upgraded to version 0.1.007

2002-07-28  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/build/iwrapper.xsl: changed to allow for (multiple)
	<default value="foo"> Nodes in a parameter specification. These
	are used as default values for this parameter in case the
	parameter is not given in the request.

	* src/de/schlund/pfixcore/generator/IWrapperParamInfo.java
	(IWrapperParamInfo): Changed to need another Parameter in the
	Constructor (which may be null): RequestParam[] defaultval. These
	can be defautl values which are given in the iwrapper XML desription.
	(initValueFromRequest): changed to use the defaultval (if not null) in case
	the input parameter has not been set in the request.

	* src/de/schlund/pfixcore/generator/IWrapperIndexedParam.java (getParamInfoForIndex): 
	(initValueFromRequest): changed to the new signatur of IWrapperParamInfo

	* docs/IWrapper_XML_Description_Language.txt: Changed docs accordingly

2002-07-26 Joerg Haecker <haecker@schlund.de>
	
	* src/de/schlund/pfixxml/ExceptionHandler.java: prettified report-mail.
	* src/de/schlund/pfixxml/ExceptionHandler.java: bugfix. Some information in
	mail was 'null' caused by relocation.
	* src/de/schlund/pfixxml/PfixServletRequest.java: added
	        -getOriginalServerName
	        -getOriginalRequestURI
	        -getCurrentServerName
	        -getCurrentRequestURI
	to fix bug above.

2002-07-25  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/workflow/Context.java (checkForAdminMode): 
	moved the adminmode stuff to it's own method. This is being called
	on init() and on reset() so it can react on reloaded properties. No need to check
	it in the hot code path.

	* example/core/xsl/utils.xsl: <pfx:maincontent> Use empty parent_path and parent_part
	when calling pfx:include. This way we ensure the dependency will be added to the toplevel 
	xml file, so we can use pfx:maintcontent even from inside another include part 

2002-07-25 Joerg Haecker <haecker@schlund.de>
	* src/de/schlund/pfixxml/ExceptionHandler.java: cleanup-task only sends
	mail if a STraceCheckerContainer is removed.
	* src/de/schlund/pfixxml/ExceptionHandler.java: assigned thread-names
	for cleanup-, reporttask and exceptionhandling-thread.
	* src/de/schlund/pfxxml/FactoryInitServlet.java: added stack-trace to
	log file if factory.init throws an exception.
	* minor fixes and additional debug messages.

2002-07-25  Thomas Stieler  <stieler@schlund.de>

	* example/core/build/create_serverxml.xsl: 
	Added node "debug" used for tomcat configuration

2002-07-25 Joerg Haecker <haecker@schlund.de>
	* src/de/schlund/pfixxml/ExceptionHandler.java: added property reloading during runtime.
	* src/de/schlund/pfixxml/ExceptionHandler.java: bugfix

2002-07-24  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/navigation.xsl: <pfx:elink>: Escape "=", too

2002-07-24 Joerg Haecker <haecker@schlund.de>
	* bugfix in src/de/schlund/pfixxml/ExceptionHandler.java  

2002-07-24  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/example/OrderFinalizer.java: Removed, now use the customization 
	via the properties.

	* src/de/schlund/pfixcore/workflow/app/ResdocSimpleFinalizer.java (renderDefault): 
	Added ability to customze via properties which ContextResources
	should be called for insertStatus(). Use something like
	pagerequest.<PAGENAME>.resdocfinalizer.insert.<NODENAME_A>=<ContextResourceClassName_A> ...
	to have ContextResource A be called as 
	        A.insertStatus(ResultDocument, ResultDocument.createNode(NODENAME_A)); 
	and so on.

	Basically this means you don't have to write a ResdocFinalizer for most cases anymore!

2002-07-24 Joerg Haecker <haecker@schlund.de>
	* src/de/schlund/pfixxml/ExceptionHandler.java: new way to handle exceptions. Now we 
	can say how many exceptions per time rate will be send by mail.
	* src/de/schlund/pfixxml/ServletManager.java: minor changes for integration of ExceptionHandler.                
	* example/common/conf/exceptionhandler.prop.in: added configuration file for ExceptionHandler.
	* lib/activation-1.0.2.jar, lib/mail-1.3.jar: added jars from sun for mail handling. SMTPAppender
	from log4j is not used any more.
	* example/common/conf/pfixlog.xml.in: Removed SMTPAppender configuration.
	* example/common/conf/factory.prop.in: Added configuration  for ExceptionHandler.

2002-07-23  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/build/create_apacheconf.xsl: addded <literalapache> node for projects.xml so
	you can add any additinal apache config statements.

	* example/core/xsl/navigation.xsl: all buttons: for target="_popup": changed
	@width => @popupwidth, @height => @popupheight and @title=>@popupid

2002-07-22  Thomas Stieler  <stieler@schlund.de>

	* example/core/build/create_jservprop.xsl: 
	added optional node /projects/common/jserv/jvmopts
	in projects.xml, if exists, generate "wrapper.bin.parameters"
	property in jserv.prop.

2002-07-19  Marcus Knappe <knappe@schlund.de>

	* src/de/schlund/pfxxml/FactoryInitServlet.java (init)
	extended exception diagnose, added comments for debugging.

2002-07-18  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/forminput.xsl <pfx:errorbox>: Added ability to
	specify the params this errorbox should handle. If pfx:errorbox
	has one or more subnodes of <pfx:paramref name="..."/> only the
	errors belonging to those params will be displayed.
	This is only preliminary.

2002-07-17  Thomas Stieler  <stieler@schlund.de>

	* example/core/xsl/master.xsl: 
	copy all attributes of body tag

2002-07-17  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/serverutil/SessionAdmin.java (registerSession): 
	* src/de/schlund/pfixcore/editor/handlers/SessionManagerState.java (getDocument): 
	* src/de/schlund/pfixxml/serverutil/SessionInfoStruct.java (getSessionIdURI): 
	(getContainerUtil): 
	* src/de/schlund/pfixxml/ServletManager.java (registerSession): 
	(redirectToSecureSSLSession): 
	Also use the ContainerUtil in the SesionInfoStruct, SessionAdmin and SessionManagerState.       
	
2002-07-16  Thomas Stieler <stieler@schlund.de>

	* example/servletconf/projects.xml
	added nodes <defaulthost/> and <jvmroute/> for tomcat configuration     

2002-07-16  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/example/SampleRes.java (SampleRes): 
	Don't just store the strings of the context resources class name,
	but provide for getter methods to all the used
	ContextResources. changed other files in this directory as needed
	for this change.

	* src/de/schlund/pfixcore/example/iwrapper/ New directory, move
	all the example *.iwrp files there. Modified other files as needed
	for this change.
	
2002-07-10  Jens Lautenbacher  <jtl@schlund.de>, Thomas Stieler <stieler@schlund.de>

	* Makefile (BUILDPATH): Remade build system. Tomcat is now included...
	Many changes to make this work.

2002-06-29 Volker Zaich <zaich@schlund.de>, Jens Lautenbacher  <jtl@schlund.de>

	Implemented first version of DHTML layer objects. All this is in need of more functionality
	* example/core/script/baselib.js (__js_Layer): Added JavaScript tree structure to hold "layer" objects.
	* example/core/xsl/utils.xsl: added pfx:layer, pfx:switch and
	pfx:layer_ref to help in creating a tree of "layer" objects
	(realized via divs).
	* example/sample1/txt/styles.xml: added sample "layer" class.
	

2002-06-28  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/targets/AuxDependencyManager.java (checkLoopFree): 
	We will not accept a dependency when adding the child to the parent would result in a 
	include loop. 
	* src/de/schlund/pfixxml/IncludeDocument.java (get): React to the return value of the
	dependency adder, and just return null when the dependency handling didn't work.
	This class, together with DependencyTracker is ugly as hell. Need to find a different way to 
	return status in the future. 
	
2002-06-06  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/generator/IWrapperParamInfo.java (initValueFromRequest): 
	Eeeek. use a String[] here instead of a Object[].

2002-06-06  Rouven Schoeller  <rouven@schlund.de>

	* Makefile.local (JAVADOC_GENERALOPTS): fixed source path (only
	one time allowed, append path elements with ":")

2002-05-22 Bernd Koecke <bk@schlund.de>

	Changes for getting an URI with encoded sessionid from ContainerUtil

2002-05-21  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/ServletManager.java (tryReloadProperties): 
	* src/de/schlund/pfixxml/AbstractXMLServer.java (tryReloadProperties): 
	* src/de/schlund/pfixxml/ContextXMLServer.java (tryReloadProperties): 
	* src/de/schlund/pfixxml/targets/TargetGeneratorFactory.java (createGenerator): 
	* src/de/schlund/pfixxml/targets/TargetGenerator.java (tryReinit): 
	* src/de/schlund/pfixxml/AppContext.java (reset): 
	* src/de/schlund/pfixcore/workflow/Context.java (reset): 
	* src/de/schlund/pfixcore/workflow/NavigationFactory.java (getNavigation): 
	Implemented automatic reloading of the servlet specific property
	file _and_ the depend file for the TargetGenerator. This needs some testing.    
	
2002-05-17  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/SPDocument.java (storeFrameAnchors): 
	* src/de/schlund/pfixxml/AbstractXMLServer.java (createAnchorMap): 
	New methods for enabling handling of anchors on frames. Use
	__anchor=<frame>:<anchor> in links to use this.

2002-05-15  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/ServletManager.java and almost every
	other class: To much for this changelog. Almost completely rewrote
	the way a request is handled. Removed HttpServletRequest from
	almost everywhere, now using PfixServletRequest. See also last
	changelog entry, and dig through the code starting with
	ServletManager, AbstractXMLServer and so on. On that way I removed
	some classes taht are not needed anymore or that stopped working 
	a long time ago (e.g. RequestRecorder comes to mind)

2002-05-13  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixxml/PfixServletRequest.java: 
	* src/de/schlund/pfixxml/TestServlet.java: ***work in progress***
	This will become the new ServletManager. But I need to make sure
	it really works, as the whole handling of Requests will change
	...again :-). We will return to relocate-first-process-afterwards.
	and we will use PfixServletRequest, which will finally allow to
	handle fileuploads the same way as all other parameters.

2002-05-03  Jens Lautenbacher  <jtl@schlund.de>

	* Makefile: Added Pfixxml back to the tree. Hacked Makefile a lot to 
	keep it building with tomcat vs. jserv (default)

2002-04-29  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/generator/IWrapperImpl.java (gimmeIHandler): 
	renamed the methods mentioned below to further avoid conflicts (get* => gimme*; setOrder=>defineOrder)

2002-04-28  Jens Lautenbacher  <jtl@schlund.de>

	* src/de/schlund/pfixcore/generator/IWrapperImpl.java (getAllParamInfos): 
	made a lot of methods final to protect e.g. getPrefix to become overwritten by a parameter 
	called "Prefix"

2002-04-26  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/editor/xsl/metatags.xsl: now a dyninclude will no longer be repeated as many times
	as there are product branches. Also some cosmetix fixes.

2002-04-24 Bernd Koecke <bk@schlund.de>
	* Changed various files for handling different src and build dirs.

2002-04-19  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/generator/IWrapperIndexedParam.java (getKeys): 
	bug fix. this used to return <name>.<index> instead of just <index>

2002-04-18  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java: 
	* de/schlund/pfixcore/workflow/app/IWrapperContainer.java: 
	removed prerequisitesMet(), areHandlerActive(). They are now in IHandlerContainer

	* de/schlund/pfixcore/workflow/app/IHandlerSimpleContainer.java: new class
	* de/schlund/pfixcore/workflow/app/IHandlerContainer.java: new class
	This class will use the new IHandlerFactory method to get to a list of handlers.
	* de/schlund/pfixcore/workflow/app/IHandlerContainerFactory.java: new class

	* de/schlund/pfixcore/generator/IHandlerFactory.java (getIHandlerForWrapperClass): 
	new method which allows to get the handler from the wrapper
	classname without always having to instantiate a wrapper
	object. This will help to get rid of having to create a wrapper
	instance just for asking the associated handlers if they are
	active or need data.

	* example/Makefile: remove all traces of compute_geometry

	* example/core/xsl/navigation.xsl: if attribute page is not given in buttons, use current page.

2002-04-17 Bernd Koecke <bk@schlund.de>
	* example/core/build/create_apacheconf_tomcat.xsl: changed rewrite rules to tomcat only mode.

2002-04-17  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/*.xsl: Big Change: Changed generation of all links to be of
	the form /<handler>;<sessid>. 

2002-04-17 Bernd Koecke <bk@schlund.de>
	* Removed the 'link'-line (item 14-15) from example/INSTALL.tc-4.0.3
	This line was unnecessary and wrong.

2002-04-17 Bernd Koecke <bk@schlund.de>
	* Bugfix in *.web.xml.in files in example/tomcat dir
    
2002-04-17 Bernd Koecke <bk@schlund.de>
	* Add the 'link'-line (item 14-15) to example/INSTALL.tc-4.0.3

2002-04-17  Jens Lautenbacher  <jtl@schlund.de>

	* example/Makefile: remove all the stuff that has to do with image geometry handling

	* de/schlund/pfixcore/editor/handlers/ImagesUploadHandler.java (handleSubmittedData): 
	remove deleting of *.d files.

	* example/core/xsl/include.xsl: make use of new ImageInfo class from pfixxml (see there).
	No .* files are necessary anymore.

2002-04-16  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/workflow/app/DefaultAuthIWrapperState.java (getDocument): 
	added calls to retrieveCurrentStatus(...) for the userhandler in case of errors.

2002-04-12  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/handlers/IncludesUploadHandler.java (retrieveCurrentStatus): 
	Added another Category (SERIALIZER) to debug spurious errors with the content of the serialized part

2002-04-11  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/utils.xsl: removed <pfx:elink>
	* example/core/xsl/navigation.xsl: put it there instead. Rewrote it so it can now handle
	<pfx:argument> and target="_popup" the same way as <pfx:button> does.

	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java (areHandlerActive): 
	Add another policy NONE which just returns true w/o asking any handlers

2002-04-08  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java (continueSubmit): 
	set selectedwrappers = currentgroup when advancing the group index, so retrieveCurrentStatus will
	use the right (aka: following) iwrappers.

2002-04-05  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/include.xsl: added the parameter prohibitEdit,
	which, if not set to the default value "no", prohibits the
	generation of the editmode links enclosing all includes. This is to keep filesizes low 
	for production systems.
	* example/Makefile (PROHIBIT_EDIT):  Set the variable to "yes" when MAKE_MODE=prod
	* example/core/build/create_depend.xsl: in the standardpage, set
	the xsl-param "prohibitEdit" to "yes" when the above is true. this forces include.xsl to remove editor funktionality.

	* example/core/xsl/forminput.xsl: search for pfx:options also deeper into the child tree 
	(via .//pfx:option)

2002-03-28  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/resources/EditorSearchImpl.java
	(startSearch): also get the relevant dynincludes and search over
	them

	* de/schlund/pfixcore/editor/handlers/SearchFinalizer.java
	(renderDefault): also render the results for dynincludes

	* de/schlund/pfixcore/editor/EditorHelper.java
	(renderAllPatternMatchingIncludes): new argument to discriminate
	between the result for includes and dynincludes.

	* de/schlund/pfixcore/editor/resources/EditorSearch.java: 
	(getDynResultSet): 
	(getDynSearchContexts): new methods to get results of search over dynamic includes (commons)

	* de/schlund/pfixcore/editor/handlers/CommonsFinalizer.java: 
	(renderDefault): also render the current search result (for dynincludes) here...

	* de/schlund/pfixcore/editor/interfaces/Search.iwrp: 
	* de/schlund/pfixcore/editor/handlers/SearchIncludeHandler.java (handleSubmittedData): 
	added a "reset" param and handle it here.

	* example/core/editor/txt/pages/main_commons.xml: 
	* example/core/editor/txt/pages/main_includes.xml: 
	* example/core/editor/txt/pages/main_search.xml:  changed to reflect new search over dynincludes and
	the display of the result (or dynresult) in the list of includes on the includes and on the commons page

2002-03-27  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/editor/xsl/metatags.xsl: make <diaplyallincludes/> customizable with a path argument

	* de/schlund/pfixcore/editor/handlers/IncludesFinalizer.java
	(renderDefault): also render the current search result here...
	
	* de/schlund/pfixcore/editor/EditorHelper.java
	(doUpdateForAuxDependency): fixed a bug where we use the wrong
	target generator when getting targets for pageinfos.

	* de/schlund/pfixcore/editor/resources/EditorSearchImpl.java (doTextNodeSearch): 
	(doSourceCodeSearch): new methods to implement two different searches
	* de/schlund/pfixcore/editor/resources/EditorSearchImple.java (startSearch):
	(setFullSource):
	(getFullSource); new methods
	* de/schlund/pfixcore/editor/resources/EditorSearch.java (startSearch):
	(setFullSource):
	(getFullSource); new methods
	* de/schlund/pfixcore/editor/interfaces/Search.iwrp: 
	* de/schlund/pfixcore/editor/handlers/SearchIncludeHandler.java (handleSubmittedData): 
	(retrieveCurrentStatus): handle boolean value if doing search over full source code or only text content

	* de/schlund/pfixcore/editor/handlers/IncludesFinalizer.java (renderDefault): add another output for
	which other products use this includePART (not only the current branch)

	* de/schlund/pfixcore/editor/EditorPageUpdater.java (addTarget):
	guard against null targets. I don't know yet why this happens at
	all, but at least we don't want to let the thread die here

	* de/schlund/pfixcore/editor/EditorHelper.java (renderBranchOptions): new method

2002-03-25 Thomas Stieler <stieler@schlund.de>
	- removed ContextResourceImpl
	* fixed classes extending ContextResourceImpl
	
2002-03-21 Bernd Koecke <bk@schlund.de>
	* example/core/build/create_apacheconf_jserv.xsl: Added rewriterules for modern-jserv.

2002-03-21 Bernd Koecke <bk@schlund.de>
	* example/Makefile: removed building of tomcat/apache.conf for the default target

2002-03-21  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/EditorHelper.java (resetIncludeDocumentTarget): used to reset the modtime of the 
	IncludeDocument's associated XMLTarget.
	* de/schlund/pfixcore/editor/handlers/IncludesUploadHandler.java (handleSubmittedData): use it there

2002-03-20  Jens Lautenbacher  <jtl@schlund.de>

	* example/* removed __sendingdata everywhere (see below)

2002-03-20  Thomas Stieler  <stieler@schlund.de>

	* example/core/xsl/navigation.xsl:
	adding "__sendingdata=1" to arguments when <pfx:argument> is given 

2002-03-20  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/navigation.xsl: button_impl: removed the <span>
	around the <a> and put class=normalclass directly into the <a>

2002-03-19 Bernd Koecke <bk@schlund.de>
    * example/INSTALL.tc-4.0.3: added as documentation 

2002-03-18  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/navigation.xsl: removed pfx:navibutton. Put missing functionality into pfx:button.

2002-03-15  Thomas Stieler  <stieler@schlund.de>

	* example/core/xsl/forminput.xsl: 
	- removed template for vselect
	- dynselect can display fixed <pfx:options>, if @position = "end" at the end
	  of the list, otherwise at the beginning
	
2002-03-15 Bernd Koecke <bk@schlund.de>
	* de/schlund/pfixcore/editor/EditorPageUpdater.java (init): made the Thread to a daemon
	* example/Makefile: added new targets for building the neccessary tomcat files.
	For building all the files, type 'make pre-install'. This builds the following files:
	    apache.conf
	    all web.xml files
	    read the original tomcat server.xml and add our hosts
	    worker.conf
	With 'make install' all of the above will be done. Additionally this target creates the
	missing dirs in tomcat, installs the webapps, copies jars and installs our server.xml
	* example/handlejars.pl: utility script for handling the jar files
	the rest of the files are stylesheets and config files for the build process
	and will be explained in a separate readme. This will be coming soon.
    
2002-03-14  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/handlers/IncludesUploadHandler.java (handleSubmittedData): 
	Eeeeeeeek. With a fast machine we do all the stuff in < 1 sec:
	create a new file, read it, import the uploaded content und save
	it back... So for the next read, the modtime of the new file with
	content is the same as the new file without a part... So the
	target will not update itself.  Using a Thread.sleep(1000) fixes
	this for now, but this is a bloody hack. Why isn't the modtime of
	a file not exact down to the millisecond????

2002-03-13  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/resources/EditorSearchContext.java: new class. used to store a match "context" (see below).

	* de/schlund/pfixcore/editor/resources/EditorSearchImpl.java (startSearch): now get all matches for an 
	include, get their "context": a short string before the match and a short string after the match, and remember them.

	* de/schlund/pfixcore/editor/EditorHelper.java (renderAllPatternMatchingIncludes): new method.
	Used to print out all includes matching a search together with their search contexts.

	* de/schlund/pfixcore/editor/resources/EditorSearchImpl.java (startSearch): 
	guard against "null" parts. (not yet defined includes)
	(addSearchContext): new method
	(getSearchContexts): new method
	* de/schlund/pfixcore/editor/resources/EditorSearch.java: change accordingly

	* de/schlund/pfixcore/editor/handlers/SearchFinalizer.java (SearchFinalizer): Use the new search information

	* de/schlund/pfixcore/editor/handlers/LogoutHandler.java (handleSubmittedData): changed to 
	also reset EditorSearch when called

2002-03-12  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/handlers/SearchFinalizer: new file
	* de/schlund/pfixcore/editor/resources/EditorSearch.java: new file
	* de/schlund/pfixcore/editor/resources/EditorSearchImpl.java: new file
	* de/schlund/pfixcore/editor/handlers/SearchIncludeHandler.java: new file
	* de/schlund/pfixcore/editor/interfaces/Search.iwrp: new file
	* example/core/editor/txt/pages/main_search.xml: new file
	* example/core/editor/conf/depend.xml.in: changed acc.
	* example/core/editor/conf/config.prop.in: changed acc.
	* example/core/editor/txt/navigation.xml: changed acc.
	* example/core/editor/xsl/metatags.xsl: changed <displayallincludes/> to handle a target page.
	Sample implementation of a search facility. There's still a lot to do, but it surprisingly already works.
	        
	* de/schlund/pfixcore/editor/resources/EditorRes.java: 
	Added get<ResourceName> to get to the COntextResources without casting.
	* de/schlund/pfixcore/editor/handler/*.java: changed accordingly 

2002-03-08  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/EditorUserAuthState.java: removed. Was dead code 
	ever since DefaultAuthIWrapperState.

2002-03-07  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/generator/IWrapperImpl.java (IWrapperImpl):
	remove the static Statuscode that it gets from teh system
	classloader. we now depend on the StatusCodeFactory being
	initialized properly

	* example/core/xsl/include.xsl: Uh, finally came around making
	editing of DynIncludes (aka "commons") via point-and-click in "admin-mode" possible. 
	* example/core/editor/conf/config.prop.in: Add another
	auxinterface to the authpage for the selection of a DynInclude

2002-03-04  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/forminput.xsl: dramatically simplified the <pfx:argument> and <pfx:command> handling. Now
	it should also accept <ixsl:...> stuff inside a command/argument node.

2002-03-01  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/forminput.xsl: 
	* example/core/xsl/navigation.xsl: Changed a bug with the new
	<pfx:command> where it uses the current page even when the
	button/form destination is on a diferent page. Now you can use a
	"page" attribute in pfx:pcommand to specifiy the page, but it
	still defaults to the current page
	* example/core/editor/xsl/metatags.xsl: Use it here.

	* example/core/editor/xsl/metatags.xsl: HORRAY! finally: the textarea fills the whole width of the screen!

2002-02-27  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java (readIWrapperGroupsConfigFromProperties): 
	check the prefixes if they contain a "." if yes, they are expected to be in the form <int>.<string>
	where <string> is the real prefix and <int> is used for calling wrapper.setOrder(int) (see below).

	* de/schlund/pfixcore/generator/IWrapperImpl.java (compareTo): 
	changed to compare against a Integer value "order".
	This may be set from the outside to define a order of execution. If not set, it defaults to 99.
	(setOrder): new method
	(getOrder): ditto

	* de/schlund/pfixcore/generator/IWrapper.java (setOrder): new method in interface

	* example/*/conf/config.prop.in: changed to use the ordered definition of interfaces explained above.

	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java (loadIWrappers): removed 
	(handleSubmittedData): do loading a single wrapper here before calling the handleSubmittedData method

	* de/schlund/pfixcore/workflow/app/DefaultIWrapperState.java (getDocument): removed the seperate load cycle.
	Now loading happens automatically just before a handler's handleSubmittedData() method is called

	* de/schlund/pfixcore/workflow/app/ResdocFinalizer.java (onLoadError): removed
	* de/schlund/pfixcore/workflow/app/ResdocSimpleFinalizer.java (onLoadError): ditto

2002-02-26  Thomas Stieler  <stieler@schlund.de>

	* de/schlund/pfixcore/workflow/app/DefaultIWrapperState.java (getResdocFinalizer):
	Throws RuntimeException if ResdocFinalizer could not be instanciated.

2002-02-25  Thomas Stieler  <stieler@schlund.de>

	* de/schlund/pfixcore/generator/IWrapperImpl.java (getIHandler):
	Added this.getClass().getName() to RuntimeException.

2002-02-21  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/generator/IWrapperParamInfo.java (setCustomSCode): new method
	* build_lib/iwrapper.xsl: new parameter @missingscode for mandatory params. Now you can set
	a custom StatusCode when the param is not submitted.
	* docs/IWrapper_XML_Description_Language.txt: document it.
	* de/schlund/pfixcore/example/AdultInfo.iwrp: Example use
	* de/schlund/pfixcore/example/StatusCodes.prop: Example use
	
2002-02-20  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/navigation.xsl: 
	* example/core/xsl/forminput.xsl:
	Finally managed to handle the various <pfx:button> types and <pfx:xinp type="submit/image">
	similar with respect to arguments (aka __DATA...) and commands (aka __CMD[...]...).
	Now you can forget about the arcane syntax that was needed to encode arguments into the name of 
	a submit button/image. Also the way commands are added is simplified. 
	Now you can do everywhere where <pfx:argument> was  already allowed AND for submit/image buttons 
	the following:

	<pfx:THE_TAG>
	  <pfx:argument name="some_name">some_value</pfx:argument>
	   ....
	   <pfx:command name="some_cmd">cmd_value</pfx:command>
	   ....
	</pfx:THE_TAG>

	where some_cmd is one of SELWRP or SELGRP (these are the only commands defined for now).
	This was a fun hack.

	* example/sample1/txt/pages/*:
	* example/core/editor/xsl/metatags:
	* example/core/editor/txt/pages/*: changed according to the above.
	
2002-02-19  Thomas Stieler  <stieler@schlund.de>

	* example/core/xsl/forminput.xsl: 
	Added a template <pfx:checknotactive>. If the named interface is not active templates will
	be applied to the child nodes.
	

2002-02-18  Thomas Stieler <stieler@schlund.de>
	* de/schlbnd/pfixcorde/PageRequestProperties.java (PageRequestProperties)
	Throw XMLException if no classname property is definded for an pagerequest.
	
2002-02-14  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/forminput.xsl: added vselect template.

2002-02-12  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/util/MakeStatusMessageXML.java (MakeStatusMessageXML): 
	Bug fix. now also append new StatusCodes that are lexically after all already existing parts

2002-02-08  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/handlers/CommonsBranchHandler.java:
	* de/schlund/pfixcore/editor/handlers/CommonsUploadHandler.java:
	* de/schlund/pfixcore/editor/interfaces/CommonsBranch.iwrp:
	* de/schlund/pfixcore/editor/interfaces/CommonsUpload.iwrp: 
	New files. These just extend the relative files for the includes page. This worked out to be really cool.
	Finished rest of commons page.
	* example/core/editor/*: changed config & UI accordingly. 

	* de/schlund/pfixcore/editor/EditorCommonsFactory.java (init): changed property to "editorcommonsfactory.includefile"
	to match other factories
	(readFile): make sure to update the modification time

	* example/common/conf/factory.prop.in
	* example/common/conf/pustefix.prop.in
	Changed to match new property. Put the stuff into factory.prop, not pustefix.prop.

	* de/schlund/pfixcore/editor/handlers/CommonsFinalizer.java (renderDefault): really use ess.getCurrentCommon
	* de/schlund/pfixcore/editor/handlers/CommonsHandler.java (handleSubmittedData): really use ess.setCurrentCommon

	* de/schlund/pfixcore/editor/EditorHelper.java (createBackup):
	changed method signature to pass the AuxDependency explicitely.  
	* de/schlund/pfixcore/editor/handlers/IncludesBranchHandler.java (handleSubmittedData): 
	* de/schlund/pfixcore/editor/handlers/IncludesUploadHandler.java (handleSubmittedData): 
	use it accordingly
	
	* de/schlund/pfixcore/editor/handlers/IncludesBranchHandler.java (setCurrentInclude): 
	* de/schlund/pfixcore/editor/handlers/IncludesUploadHandler.java (getCurrentInclude): 
	new methods, used instead of a direct esess.getCurrentInclude()
	call. This is made so the retrival of the include can be
	overwritten in child classes (see below). Use this method all over the two files.
	
2002-02-07  Thomas Stieler  <stieler@schlund.de>

	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java (readIWrappersConfigFromProperties):
	Added pagename in warning
	        
2002-02-06  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/handlers/IncludesFinalizer.java (renderAllIncludes): removed method 
	* de/schlund/pfixcore/editor/EditorHelper.java (renderAllIncludesForNavigation): 
	moved method from IncludesFinalizer/renderAllIncludes

	* de/schlund/pfixcore/editor/handlers/CommonsHandler.java: 
	* de/schlund/pfixcore/editor/EditorCommonsFactory.java: 
	* de/schlund/pfixcore/editor/interfaces/Commons.iwrp: 
	* de/schlund/pfixcore/editor/handlers/CommonsFinalizer.java: 
	Added. First part of tackling the remaining bit: editing of dynamic includes ("commons")
	
2002-01-23  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/navigation.xsl: 
	* example/core/xsl/include.xsl: Changes to cope with xalan2.2 bugs/features. no functional changes

2002-01-17  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/generator/prechecks/RegexpCheck.java (RegexpCheck): 
	* de/schlund/pfixcore/generator/casters/ToDate.java (ToDate): 
	* de/schlund/pfixcore/generator/casters/ToInteger.java (ToInteger): 
	* de/schlund/pfixcore/generator/casters/ToFloat.java (ToFloat): 
	* de/schlund/pfixcore/generator/casters/ToBoolean.java (ToBoolean): 
	* de/schlund/pfixcore/generator/postchecks/FloatRange.java (FloatRange): 
	* de/schlund/pfixcore/generator/postchecks/IntegerRange.java (IntegerRange): 
	make statuscodes seteable via a <cparam>: in the case of casters it's just one called scode_casterror, 
	but generally it depends on the type of checker used (as it may use more than one scode).
	
	* de/schlund/pfixcore/generator/casters/SimpleCaster.java: removed
	* de/schlund/pfixcore/generator/casters/SimplePreChecker.java: removed
	* de/schlund/pfixcore/generator/casters/SimplePostChecker.java: removed
	
2002-01-16  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/workflow/app/DefaultAuthIWrapperState.java: Guard agains null value

	* example/core/xsl/master.xsl: Make frameless pages behave more like frame containing pages. 
	Needs testing. 

	* de/schlund/pfixcore/editor/EditorProductFactory.java (readFile): parse for <namespace> nodes

	* de/schlund/pfixcore/editor/PfixcoreNamespace.java: new class
	* de/schlund/pfixcore/editor/EditorProduct.java (getPfixcoreNamespace): new Method
	* de/schlund/pfixcore/editor/EditorProduct.java (EditorProduct): Store all used Namespaces 
	in this product
	
	* de/schlund/pfixcore/editor/EditorHelper.java (checkForFile): use known Namespaces for Product when 
	making a new file

	* de/schlund/pfixcore/editor/handlers/IncludesUploadHandler.java (IncludesUploadHandler): 
	made DocumentBuilderFactory namespace aware
	(handleSubmittedData): add all known namespaces to the "<product>....</product>" that clamps the submitted 
	string data, but remove them again after importing. Handle exceptions on importing the newnode.

	* de/schlund/pfixcore/editor/handlers/IncludesBranchHandler.java
	(handleSubmittedData): changed according to new signature of
	EditorHelper.checkForFile(...)

2002-01-16  Thomas Stieler  <stieler@schlund.de>

	* navigation.xsl: Append <pfx:argument>-nodes as parameters also if using target="_popup" with <pfx:button/>

2002-01-10  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/interfaces/ImagesUpload.iwrp: 
	* de/schlund/pfixcore/editor/interfaces/IncludesUpload.iwrp:
	Both: Backup is no longer an array, just a single String
	* de/schlund/pfixcore/editor/handlers/ImagesUploadHandler.java (handleSubmittedData): 
	* de/schlund/pfixcore/editor/handlers/IncludesUploadHandler.java (handleSubmittedData): 
	Both: handle accordingly
	
	* de/schlund/pfixcore/editor/handlers/IncludesUploadHandler.java (retrieveCurrentStatus): remove rendering
	of backup content.

	* de/schlund/pfixcore/editor/handlers/ImagesUploadHandler.java (retrieveCurrentStatus): removed 

	* de/schlund/pfixcore/editor/EditorHelper.java (renderBackupOptions): new method

	* de/schlund/pfixcore/editor/handlers/IncludesFinalizer.java (renderDefault): add backup content here
	* de/schlund/pfixcore/editor/handlers/ImagesFinalizer.java (renderDefault): add backup content here

	* example/core/xsl/forminput.xsl: removed <pfx:xinp type="vselect">. Use dyselect instead.
	Bugfixes for dynselect.
	* example/core/editor/xsl/metatags.xsl: changed accordingly

	* example/sample1/xml/two_frames_vert.xml: Added
	* example/sample1/conf/config.prop.in: 
	* example/sample1/conf/depend.xml.in: Add a bunch of pages for navi testing.
	* example/sample1/xsl/metatags.xsl: add sample_navigation, sample_body. All preliminary.

2002-01-07  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/editor/txt/pages/*: remove pfx:interface as long as it isn't implemented anyways

	* example/core/xsl/utils.xsl: remove pfx:errorbox, pfx:label here
	* example/core/xsl/forminput.xsl: add them here, and remove pfx:formlabel, pfx:errorline and related stupid stuff.
	Now you can use <pfx:label> also in metatags.
	
	* example/core/editor/xsl/metatags.xsl: change accordingly.

2001-12-28  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/editor/xsl/metatags.xsl: handle reuse of backed up images in the UI

	* de/schlund/pfixcore/editor/interfaces/IncludesUpload.iwrp: just moved some lines around

	* de/schlund/pfixcore/editor/handlers/IncludesBranchHandler.java (handleSubmittedData): 
	use EditorHelper.doUpdateForAuxDependency.

	* de/schlund/pfixcore/editor/handlers/IncludesUploadHandler.java (handleSubmittedData): bug fixes,
	use EditorHelper.doUpdateForAuxDependency.
	Use EDITOR logger for change data logging.
	
	* de/schlund/pfixcore/editor/handlers/ImagesUploadHandler.java (retrieveCurrentStatus): 
	add backup names
	(handleSubmittedData): handle backuped images to be reused.

	* de/schlund/pfixcore/editor/handlers/ImagesHandler.java
	(retrieveCurrentStatus): new method, try to get the lock for the
	image here already ( needed for "includes upload handler" ( which will
	be asked afterwards) to be active)

	* de/schlund/pfixcore/editor/interfaces/ImagesUpload.iwrp: add Backup and HaveBackup param.

	* de/schlund/pfixcore/editor/EditorHelper.java
	(contructBackupFile): New private method
	(getBackupImageFile): new public method
	(createBackup): simplified. use contructBackupFile.
	(createBackupImage): new method, for backup of image data
	(doUpdateForAuxDependency): new method, used by includesbranch and
	includesupload to trigger a asynchronous rebuild of affected pages
	but make sure that _one_ page is redone synchronously.

	* de/schlund/pfixcore/editor/ReverseStringComp.java: removed
	* de/schlund/pfixcore/editor/ReverseCreationComp.java: Added
	* de/schlund/pfixcore/editor/EditorHelper.java (getBackupNames): 
	Use it here instead of lexical compare of file name (stupid me).

2001-12-26  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/EditorHelper.java (getAuxdepsForInclude): Really recurse.

2001-12-24  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/handlers/IncludesUploadHandler.java (handleSubmittedData): 
	better error message: lines/cols

	* *** Happy Xmas ***
	
	* example/core/editor/*: UI and bug fixes.

	* de/schlund/pfixcore/editor/interfaces/Includes.iwrp: remove product param. 
	Will be deduced by Includes Handler on it's own.
	* example/core/xsl/include.xsl: remove product param here, too when calling the editor

	* de/schlund/pfixcore/editor/handlers/IncludesUploadHandler.java (handleSubmittedData): 
	rewritten. Don't use own parser, use targetgenerator
	use backup node directly, don'serialize first (stupid me)
	
	* de/schlund/pfixcore/editor/handlers/IncludesHandler.java: 
	rewritten. Deduce if using the default branch or the product specific one.
	
	* de/schlund/pfixcore/editor/handlers/IncludesBranchHandler.java (handleSubmittedData): 
	rewritten. Don't use own parser, use targetgenerator

	* de/schlund/pfixcore/editor/EditorHelper.java (createEmptyPart): return the Node
	(getBackupContent): return Content as Node not as String
	(getIncludeDocument): new method
	(getIncludePart): use it
	(getIncludePart): use both

2001-12-22  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/ReverseStringComp.java: Added.
	* de/schlund/pfixcore/editor/EditorHelper.java (getBackupNames): 
	use it there

	* example/core/editor/xsl/metatags.xsl: bug fixes.

	* de/schlund/pfixcore/editor/EditorHelper.java (createEmptyPart): 
	(checkForFile): new methods (copied from IncludesUploadHandler)
	* de/schlund/pfixcore/editor/handlers/IncludesUploadHandler.java (handleSubmittedData): 
	Use it there.
	
	* de/schlund/pfixcore/editor/handlers/IncludesBranchHandler.java (doSerialize): 
	(doUpdate): new methods.
	Implemented "copy" and "delete" for includes branch handling.


2001-12-21  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/include.xsl: bug fixes

	* example/core/xsl/forminput.xsl: <xinp type="vselect"> fixes. removed dead code.

	* example/core/editor/xsl/metatags.xsl: UI for backup handling and
	for handling product specific branches (not ready yet)

	* de/schlund/pfixcore/editor/EditorHelper.java (contructBackupDir): 
	(createBackup): 
	(getBackupNames): 
	(getBackupContent): New methods. Used for backup handling

	* de/schlund/pfixcore/editor/resources/EditorSessionStatusImpl.java (getBackupDir): 
	* de/schlund/pfixcore/editor/resources/EditorSessionStatus.java:
	New method.

	* de/schlund/pfixcore/editor/interfaces/IncludesUpload.iwrp: Added
	boolean HaveBackup and String Backup for using a backup of the current branch instead

	* de/schlund/pfixcore/editor/handlers/IncludesUploadHandler.java (retrieveCurrentStatus): 
	display all available backups for the current include branch
	(handleSubmittedData): handle using a backup instead.

	* de/schlund/pfixcore/editor/handlers/IncludesBranchHandler.java: 
	* de/schlund/pfixcore/editor/interfaces/IncludesBranch.iwrp: 
	Added. can now create a product specific branch of a include.

	* example/core/editor/conf/config.prop.in: changed accordingly
	        
2001-12-20  Jens Lautenbacher  <jtl@schlund.de>

	* example/...: random bug fixes in xml/xslt stuff.
	
	* example/sample1/conf/depend.xml.in: bug fix: product is sample1, not editor

	* example/jserv/apache.conf.in: Added core/editor/img passthrough to sample1 project.

	* example/core/editor/xsl/metatags.xsl: bug fixes

	* example/core/editor/conf/config.prop.in: added extinc auxinterface to editoruserauth page

	* de/schlund/pfixcore/editor/StatusCodes.prop: Added INCLUDE_UNDEF

	* example/core/xsl/include.xsl: Implemented calling of editor from inside a project. (aka __editmode=admin)

2001-12-20-(night)  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/StatusCodes.prop: 
	Added two statucodes for image uploading. THIS IS A BAD HACK as we don't ever use them at all, because
	we need to mirror the exceptions that may arise during parsing, so a static code won't help.
	THIS HACK HAS TO DIE. soon. We need to be able to add also Strings to the errors.

	* de/schlund/pfixcore/editor/handlers/IncludesHandler.java (retrieveCurrentStatus): 
	added specialized method. We always try to (re-) get the lock on the current include here,
	so the uplinc interface can be active and so be able to insert the current stringvalue for the textarea.

	* example/core/editor/txt/pages/main_includes.xml:
	* example/core/editor/xsl/metatags.xsl:
	More work on Textarea for editing affected branch of current part.
	Will correctly be disabled when lock isn't held on part.

	Also change all occurences where we select an include to not only
	restrict the wrappers to incsel but also to uplinc (so the
	retrieveCurrentStatus method of this is called to fill the
	textarea).  We use the now defined order (alphabetically with the
	prefix names) so uplinc will always be called after incsel. This is a fun hack.
	
	* example/core/editor/txt/*: small unimportant stuff

	* de/schlund/pfixcore/editor/handlers/IncludesFinalizer.java (renderDefault): 
	Removed rendering of the content of the textarea. This is what the IncludesUploadHandler
	has to do in it's retrieveCurrentStatus.

	* de/schlund/pfixcore/generator/IWrapperImpl.java (compareTo): 
	new function, class now implements Comparable.

	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java (IWrapperGroup): 
	Make the IWrapperGroup inner class use a TreeMap to hold
	IWrappers. This has the nice effect of having a defined order in
	which iwrappers (or their associated handlers) will be called for
	retrieving their status or for submit handling.

	* de/schlund/pfixcore/editor/handlers/IncludesUploadHandler.java: Added
	* de/schlund/pfixcore/editor/interfaces/IncludesUpload.iwrp: Added.
	Make everything optional, boolean HaveUpload is used to see if there is really data.
	Make uploading Images work. This needs some more work (and another interface) so
	one can switch to a product specific branch (and delete it again).

2001-12-19  Jens Lautenbacher  <jtl@schlund.de>
	* de/schlund/pfixcore/editor/EditorHelper.java (renderIncludeContent): 
	return an Element (the part), used in for rendering the stringcontent for the textarea

	* de/schlund/pfixcore/editor/handlers/IncludesFinalizer.java (renderDefault): 
	use the above here to render the affected content of the part for use in the textarea.
	BAD HACK. 

	* example/core/editor/txt/pages/main_includes.xml:
	* example/core/editor/xsl/metatags.xsl:
	Textarea for editing affected branch of current part. Needs more work.

	* example/core/editor/txt/pages/main_editoruserauth.xml:
	design fix
	
2001-12-18  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/EditorProductFactory.java (readFile): 
	Removed navigation special file handling.
	
	* example/common/conf/products.prj.in: 
	Removed navigation element

	* example/core/editor/conf/config.prop.in: 
	* example/sample1/conf/config.prop.in: 
	Removed navigation.filename property
	
	* de/schlund/pfixcore/workflow/Context.java (NAVPROP): 
	* de/schlund/pfixcore/workflow/Navigation.java (Navigation): 
	Really make the navigation work with the depend.xml file.

2001-12-18-(night) Jens Lautenbacher  <jtl@schlund.de>

	* example/sample1/conf/navigation.xml: 
	* example/core/editor/conf/navigation.xml: 
	REMOVED!
	
	* example/sample1/conf/depend.xml.in: 
	* example/core/editor/conf/depend.xml.in: 
	Added content of corresponding navigation file here. no need to have more config files than needed.
	* example/sample1/xsl/custommaster.xsl: 
	* example/sample1/xsl/custommetatags.xsl: 
	* example/core/editor/xsl/custommetatags.xsl: 
	* example/core/editor/xsl/custommaster.xsl: 
	* example/sample1/xsl/metatags.xsl: 
	* example/core/editor/xsl/metatags.xsl: 
	* example/core/xsl/master.xsl: 
	Changed accordingly.
	
2001-12-17  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/interfaces/IncludesUpload.iwrp: 
	Added

	* de/schlund/pfixcore/util/MakeStatusMessageXML.java: 
	* example/core/xsl/include.xsl: 
	* example/* [include files]: 
	IMPORTANT:
	
	changed <defaultproduct> -> <product name="default">
	        <defaultlang>    -> <lang name="default">
	
2001-12-14  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/FileLockFactory.java: Added. used to get Objects corresponding to filenames
	to be able to synchronize on.
	* de/schlund/pfixcore/editor/EditorHelper.java (renderIncludeContent): Use it there.

2001-12-13  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/editor/... Related xml/xslt/styles work for "includes".
	* example/core/editor/xml/... 
	Fixed a bug with imporper use of <pfx:maincontent> : this must be used only on xml leave targets, never
	in includes !!!!
	* example/core/editor/xml/three_frames_wide.xml: Added  
	* example/core/editor/xml/three_frames_targets.xml: Removed.    
	
	* de/schlund/pfixcore/editor/EditorHelper.java (renderImagesFlatRecursive): added with different signature.
	(renderIncludes): added with different signature.
	(renderIncludeContent): Added.

	* de/schlund/pfixcore/editor/interfaces/Includes.iwrp: 
	* de/schlund/pfixcore/editor/handlers/IncludesHandler.java: 
	* de/schlund/pfixcore/editor/handlers/IncludesFinalizer.java: 
	Added. Made "includes" page work readonly.
	
2001-12-12  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/editor/txt/pages/main_home.xml: added "update all Pages of current Product" 
	button.

	* de/schlund/pfixcore/editor/handlers/UpdateProductPagesHandler.java: 
	* de/schlund/pfixcore/editor/interfaces/UpdateProductPages.iwrp: 
	Added. 
	* de/schlund/pfixcore/editor/handlers/HomeHandler.java: 
	* de/schlund/pfixcore/editor/interfaces/Home.iwrp: 
	Removed 
	* example/core/editor/conf/config.prop.in: 
	changed accordingly
	
	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java (errorHappened): 
	(continueSubmit):
	(isPageAccessible):
	(areHandlerActive):
	(needsData):
	(readIWrappersConfigFromProperties): Handle the border case where
	no interfaces are defined. Just react like a "static" state would:
	errorHappened, continueSubmit return false, isPageAccessible,
	areHandlerActive, needsData return true and
	readIWrappersConfigFromProperties doesn't bail out when no
	interfaces are defined (it prints a warning, though)

2001-12-12-(night)  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/editor/... Related xml/xslt/styles work for "editorusermanager".
	Other small stuff on prodselect, lockmanager, editoruserdata and sessionmanager.

	* example/core/editor/conf/config.prop.in: 
	* example/core/editor/conf/navigation.xml: 
	* example/core/editor/conf/depend.xml.in: 
	Removed userforedit dummy page.
	        
	* de/schlund/pfixcore/editor/StatusCodes.prop: USER_EXISTS added

	* de/schlund/pfixcore/editor/handlers/UserForEditHandler.java (needsData): 
	return true when no UserForEdit is set 

	* de/schlund/pfixcore/editor/handlers/EditUserDataHandler.java (handleSubmittedData): 
	actually add the User (it may be a floating user). 
	After commit, set the UserForEdit to null
	
	* de/schlund/pfixcore/editor/handlers/EditorUserDataFinalizer.java (renderDefault): 
	render the id of the edited user

	* de/schlund/pfixcore/editor/EditorUserFactory.java (delEditorUser): 
	now expects a EditorUser[] instead of EditorUser

	* de/schlund/pfixcore/editor/interfaces/DeleteUser.iwrp: 
	* de/schlund/pfixcore/editor/interfaces/AddUser.iwrp: 
	* de/schlund/pfixcore/editor/handlers/EditorUserManagerFinalizer.java: 
	* de/schlund/pfixcore/editor/handlers/DeleteUserHandler.java: 
	* de/schlund/pfixcore/editor/handlers/AddUserHandler.java: 
	Added. make "editorusermanager" page work.

	* de/schlund/pfixcore/editor/handlers/LockManagerFinalizer.java (EditorLockManagerFinalizer): 
	renamed from EditorLockManagerFinalizer

2001-12-11  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/editor/img/info.gif: Added

	* de/schlund/pfixcore/workflow/Context.java (getName): new method to get context name. 
	needed in editor :-(

	* example/core/editor/... Related xml/xslt/styles work for "sessionmanager"

	* de/schlund/pfixcore/editor/handlers/SessionManagerState.java (SessionManagerState): 
	Added. made "sessionamanger" page.

	* example/core/editor/... Related xml/xslt/styles work; finished "lockmanager" page.

	* de/schlund/pfixcore/editor/interfaces/DeleteLock.iwrp: 
	* de/schlund/pfixcore/editor/handlers/EditorLockManagerFinalizer.java: 
	* de/schlund/pfixcore/editor/handlers/DeleteLockHandler.java: 
	Added.
	
2001-12-10  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java 
	(readIWrappersConfigFromProperties): Bail out when no interface is given.

	* example/core/editor/... Related xml/xslt/styles work; finished "editoruserdata" page.
	Made button "prohibit login" work. Other stuff.
	
	* de/schlund/pfixcore/editor/interfaces/UserForEdit.iwrp: Added.
	* de/schlund/pfixcore/editor/handlers/UserForEditHandler.java Added.
	only let admin users change other user data then their own.

	* de/schlund/pfixcore/editor/handlers/UserAuthHandler.java (handleSubmittedData): 
	respect the value of EditorSessionStatus.getLoginAllowed()

	* de/schlund/pfixcore/editor/interfaces/LoginStatus.iwrp: 
	* de/schlund/pfixcore/editor/handlers/EditUserDataHandler.java: 
	* de/schlund/pfixcore/editor/interfaces/EditUserData.iwrp:
	* de/schlund/pfixcore/editor/interfaces/CancelEditUser.iwrp:
	* de/schlund/pfixcore/editor/handlers/LoginStatusHandler.java:
	* de/schlund/pfixcore/editor/handlers/EditorUserDataFinalizer.java:
	* de/schlund/pfixcore/editor/handlers/CancelEditUserHandler.java: Added
	        - Now we can prohibit further logins (when admin).
	        - We can change the userdata of the EditorUser stored/retrieved 
	          via EditorSessionStatus.get/setUserForEdit(...)

	* de/schlund/pfixcore/editor/StatusCodes.prop: added div. scodes

	* de/schlund/pfixcore/editor/EditorUserFactory.java (writeFile): made public so we can call it 
	whenever we change EditorUser data

	* de/schlund/pfixcore/workflow/PageFlowManager.java (pageFlowToPageRequest): Now takes 
	another param HttpServletRequest which is searched for "__pageflow" to possibly set the current
	pageflow from this by name. uncapitalized method.
	* de/schlund/pfixcore/workflow/AuthContext.java (trySettingPageRequestAndFlow): Use it
	* de/schlund/pfixcore/workflow/Context.java (trySettingPageRequestAndFlow): Ditto

	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java (continueSubmit): 
	More magic.  If we successfully completed a restricted submit, AND
	all of the restricted IWrappers are referenced in the property
	"restrictedcontinue" (space sep. list of prefixes), return false
	(that means, if the finalizer doesn't do even more magic on it's
	own, we will continue with the workflow).
	
	* de/schlund/pfixcore/editor/resources/EditorSessionStatus.java:
	* de/schlund/pfixcore/editor/resources/EditorSessionStatusImpl.java (login_allowed): 
	Added static field to remember if new logins should be allowed. Added cooresponding getter/setter
	Added get/setUserForEdit EditorUser whose data is to be changed.
	
	* de/schlund/pfixcore/editor/handlers/LoginStatusHandler.java: 
	* de/schlund/pfixcore/editor/interfaces/LoginStatus.iwrp: Added.
	Allow for prohibiting new login attempts
	
	* de/schlund/pfixcore/workflow/app/DefaultAuthIWrapperState.java (userInsertErrors): new method.
	show errors when login fails.

2001-12-10  Thomas Stieler  <stieler@schlund.de>

	* de/schlund/pfixcore/workflow/ContextResource.java (init):
	                                                    (insertStatus):
	                                                    (reset): 
	                                                    (needsData):
	throws Exception added.

	* de/schlund/pfixcore/editor/handlers/HomeFinalizer.java
	* de/schlund/pfixcore/editor/handlers/ImagesFinalizer.java
	* de/schlund/pfixcore/editor/handlers/PagesFinalizer.java
	* de/schlund/pfixcore/editor/handlers/ProductSelectFinalizer.java
	* de/schlund/pfixcore/editor/handlers/TargetsFinalizer.java
	* de/schlund/pfixcore/example/AdultInfoHandler.java
	* de/schlund/pfixcore/example/ContextAdultInfoImpl.java
	* de/schlund/pfixcore/example/OrderFinalizer.java
	* de/schlund/pfixcore/example/TShirtHandler.java
	* de/schlund/pfixcore/example/TrouserHandler.java
	* de/schlund/pfixcore/generator/IHandler.java
	* de/schlund/pfixcore/workflow/ContextResourceImpl.java
	* de/schlund/pfixcore/workflow/ContextResourceManager.java
	* de/schlund/pfixcore/workflow/ContextResourceObserver.java
	* de/schlund/pfixcore/workflow/ObservableContextResource.java
	* de/schlund/pfixcore/workflow/ObservableContextResourceImpl.java
	* de/schlund/pfixcore/workflow/app/IWrapperContainer.java
	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java
	* de/schlund/pfixcore/workflow/app/ResdocFinalizer.java
	* de/schlund/pfixcore/workflow/app/ResdocSimpleFinalizer.java
	Changed accordingly
	
	
2001-12-07  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/workflow/app/DefaultAuthIWrapperState.java: Added. This is a general version of 
	de/schlund/pfixcore/editor/EditorUserAuthState.java which was removed again.
	* de/schlund/pfixcore/editor/EditorUserAuthState.java: removed.
	* example/core/editor/conf/config.prop.in: Reflect changes. use DefaultAuthIWrapperState now.

	* de/schlund/pfixcore/workflow/PageFlowManager.java (PageFlowToPageRequest): Bugfix. made logging msg. clearer.

	* de/schlund/pfixcore/workflow/Context.java (trySettingPageRequestAndFlow): made protected

	* de/schlund/pfixcore/workflow/AuthContext.java (trySettingPageRequestAndFlow): New overwritten here. 
	Changed here from super class so that the autpage isn't called twice on submit any more.
	(documentFromCurrentStep): more debug
	
2001-12-07-(night)  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/editor/xsl/metatags.xsl (displayaffectedpages): 
	finally allow to jump to pages in other products...
	This works now that the authstate has been rewritten (see below)

	* de/schlund/pfixcore/workflow/PageRequest.java (PAGEPARAM): made public 

	* example/core/xsl/forminput.xsl (pfx:forminput): change to use a supplied hidden param for __page
	This is basically only needed for authpages. They can use it to set a final destination _after_
	a successful authentication.

	* de/schlund/pfixcore/editor/handlers/ProductSelectMandatoryHandler.java: Removed
	* de/schlund/pfixcore/editor/interfaces/ProductSelectMandatory.iwrp: Removed 
	* de/schlund/pfixcore/workflow/app/AuthIWrapperState.java: Removed
	* de/schlund/pfixcore/editor/EditorUserAuthState.java: Added
	completely changed the way authpages work. This is finally working now "The Right Way(TM)"
	
	* de/schlund/pfixcore/editor/interfaces/ProductSelect.iwrp: 
	* de/schlund/pfixcore/editor/handlers/ProductSelectHandler.java (needsData): 
	"Name" param is now mandatory here, copied needsData method from removed ProductSelectMandatoryHandler.
	
	* de/schlund/pfixcore/workflow/StateImpl.java (isSubmitTriggerAny): private helper method added
	(isSubmitTrigger): only return true when getting the parameter
	"__sendingdata" (behaviour stayed the same, but uses helper method now)
	(isSubmitTriggerAny): New method, only true when param "__sendingauthdata" is supplied
	I'm sure this change will break all existing authpages :-( Sorry.
	
	* example/core/editor/conf/config.prop.in: Reflect changes. use EditorUserAuthState now.
	* example/core/editor/txt/pages/main_editoruserauth.xml: Reflect changes. sets @type="auth"
	in <forminput> now.
	
2001-12-06-(night)  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/editor/txt/pages/main_prodselect.xml: just some reorg, UI for missing pages.

	* example/core/editor/xsl/custommaster.xsl: pfx:* get's extra fontification

2001-12-05  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/EditorHelper.java (getAuxdepsForTarget): bug fix. recurse auxdeps 
	in any case when recurse == true

2001-12-05-(night)  Jens Lautenbacher  <jtl@schlund.de>

	* example/common/conf/pfixlog.xml.in: made priority for profiling ERROR (== disable profiling)
	I am very sure that I will kick out the whole profiling stuff today or tomorrow...

	* example/jserv/apache.conf.in: Add <passthrough> for the "/sample1/img" directory.

	* example/core/editor/... Related xml/xslt/styles work; finished "Images" page.
	
	* de/schlund/pfixcore/editor/handlers/TargetsFinalizer.java: 
	* de/schlund/pfixcore/editor/handlers/ProductSelectFinalizer.java:
	* de/schlund/pfixcore/editor/handlers/PagesFinalizer.java
	all: (renderDefault): release a lock that's maybe held.

	* de/schlund/pfixcore/editor/handlers/ImagesUploadHandler.java (isActive): 
	own impl. of this method: be only active if current image is not
	null and a lock has been obtained
	(handleSubmittedData): finally handle the submitted data, bug fixes.

	* de/schlund/pfixcore/editor/handlers/ImagesState.java (getDocument): added debug

	* de/schlund/pfixcore/editor/handlers/ImagesFinalizer.java (renderDefault): 
	try to obtain a lock, render locking status into currentimage, render locking user if 
	lock could not be obtained.

	* example/sample1/img/test.gif: 
	* de/schlund/pfixcore/editor/handlers/HomeFinalizer.java: 
	Added.
	
	* de/schlund/pfixcore/editor/EditorLockFactory.java:
	Added. EditorSessionStatus-bound locking. Locks all AuxDependencies, no longer makes a 
	difference between images or includes.

	* de/schlund/pfixcore/editor/resources/EditorSessionStatus.java
	* de/schlund/pfixcore/editor/resources/EditorSessionStatusImpl.java
	(getLock):  
	(isOwnLock):    
	(releaseLock):  proxy that stuff to the EditorLockFactory
	(getEditorSessionId): used to identify a EditorSessionStatus instance.
	(== "ES_" + context.getVisitId())
	
2001-12-04  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/StatusCodes.prop: Added more statuscodes for image upload

	* example/core/editor/... Related xml/xslt/styles work for "Images" page: trying to handle upload.

	* de/schlund/pfixcore/editor/interfaces/ImagesUpload.iwrp: 

	* de/schlund/pfixcore/editor/handlers/ImagesUploadHandler.java: Added

	* de/schlund/pfixcore/editor/handlers/ImagesState.java: Added. new
	state that extends DefaultIWrapperImpl. Needed to make fileupload work.
	
	* de/schlund/pfixcore/editor/resources/MultipartStorerImpl.java: 
	* de/schlund/pfixcore/editor/resources/MultipartStorer.java: 
	Added to store the filupload stuff in ImagesState so a handler can get it.
	* de/schlund/pfixcore/editor/resources/EditorRes.java (EMULTI): define it there.

2001-12-04-(night)  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/editor/... Related xml/xslt/styles work for "Images" page

	* de/schlund/pfixcore/editor/StatusCodes.prop: 
	Added SCode for IMAGE_UNDEF

	* de/schlund/pfixcore/editor/EditorHelper.java (renderAffectedPages): 
	small changes for helping with "Images" page

	* example/core/editor/txt/pages/main_images.xml: renamed from main_bilder.xml
	* example/core/editor/txt/pages/main_commons.xml: renamed from "main_common.xml" 

	* de/schlund/pfixcore/editor/interfaces/Images.iwrp: 
	* de/schlund/pfixcore/editor/handlers/ImagesHandler.java:
	* de/schlund/pfixcore/editor/handlers/ImagesFinalizer.java: 
	Added. Made "Images" work in VIEW mode only!
	
	* de/schlund/pfixcore/editor/resources/EditorSessionStatusImpl.java: 
	* de/schlund/pfixcore/editor/resources/EditorSessionStatus.java (EditorSessionStatus): 
	get/setCurrentBild -> get/setCurrentImage

2001-12-03  Thomas Stieler  <stieler@schlund.de>

	* de/schlund/pfixcore/workflow/ContextResourceManager.java: 
	The work is now done in init(Context context) method.
	Use a number in the name of each property to define the order
	of ContextResources-initialization       

	* de/schlund/pfixcore/workflow/Context.java: 
	Use StringBuffer instead of String in toString() 

	
2001-12-03  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/editor/... More styles/xml/xslt work, finished "Targets"

	* example/common/conf/factory.prop.in: new factory.initialize: EditorPagesUpdater

	* de/schlund/pfixcore/editor/handlers/TargetsFinalizer.java (renderDefault): 
	added rendering of xml content and affected pages

	* de/schlund/pfixcore/editor/handlers/TargetsHandler.java (handleSubmittedData): 
	check if target is uptodate, rebuild it if otherwise

	* de/schlund/pfixcore/editor/handlers/PagesHandler.java (handleSubmittedData): 
	check if target for page is uptodate, rebuild it if otherwise

	* de/schlund/pfixcore/editor/EditorHelper.java (renderAffectedPages): 
	added method, use EditorPageUpdater
	(renderTargetContent): new method, render the xml repr. of a target

	* de/schlund/pfixcore/editor/EditorPageUpdater.java (EditorPageUpdater): 
	Added. Thread to update pages in background

2001-12-02  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/editor/... More styles work, finished "Pages" and most of "Targets"

	* de/schlund/pfixcore/editor/StatusCodes.prop: added code for unknown target

	* de/schlund/pfixcore/editor/resources/EditorSessionStatusImpl.java (reset): 
	don't set the user to "null" on reset

	* de/schlund/pfixcore/editor/handlers/PagesFinalizer.java (renderDefault): 
	renamed some calls to EditorHelper methods

	* de/schlund/pfixcore/editor/handlers/LogoutHandler.java (handleSubmittedData): 
	do a completet reset of the EditorSessionStatus

	* de/schlund/pfixcore/editor/EditorHelper.java: 
	More helper funcs (e.g. for "targets" page)

	* example/core/editor/xml/three_frames_targets.xml: 
	* example/core/editor/img/alpha.gif: 
	* de/schlund/pfixcore/editor/interfaces/Targets.iwrp: 
	* de/schlund/pfixcore/editor/handlers/TargetsHandler.java: 
	* de/schlund/pfixcore/editor/handlers/TargetsFinalizer.java: 
	Added.
	
2001-11-30  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/handlers/HomeHandler.java (HomeHandler): 
	now extends EditorStdHandler

	* de/schlund/pfixcore/editor/interfaces/Pages.iwrp: 
	* de/schlund/pfixcore/editor/handlers/PagesHandler.java: 
	* de/schlund/pfixcore/editor/handlers/PagesFinalizer.java: 
	* de/schlund/pfixcore/editor/handlers/EditorStdHandler.java: 
	* de/schlund/pfixcore/editor/EditorHelper.java: 
	Added.

	* example/core/editor/... first part of "Pages" page.
	
2001-11-30  Thomas Stieler  <stieler@schlund.de>

	* de/schlund/pfixcore/workflow/ContextResource.java: 
	* de/schlund/pfixcore/workflow/ContextResourceImpl.java: 

	changed init(Properties props, ContextResourceManager crm)
	into init(Context contex)
	Deleted getter for Properties and ContextResourceManager.
	

2001-11-30  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/editor/xml/empty.xml:
	Added. Used for dummy pages like "Logout" which are only used to
	trigger handlers but which are never visible.
	
	* de/schlund/pfixcore/editor/interfaces/Logout.iwrp: 
	* de/schlund/pfixcore/editor/interfaces/Home.iwrp: 
	* de/schlund/pfixcore/editor/handlers/LogoutHandler.java: 
	* de/schlund/pfixcore/editor/handlers/HomeHandler.java: 
	Added.  Canged the way the logout mechanism works by adding dummy page "logout"

	* example/core/editor/...: style stuff, xml/xsl bug fixes, home page works, top navi works


2001-11-30  Thomas Stieler  <stieler@schlund.de>

	* de/schlund/pfixcore/workflow/ContextResourceManager.java: 
	* all classes implementing ContextRescoure

	Splitting all ContextResources in an interface and an implementation.
	The ContextResourceManager now gets a classname for each
	object and a list of interfaces, which should be used from
	this object.
	
2001-11-29-(evening) Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/example/SampleRes.java: 
	* de/schlund/pfixcore/editor/resources/EditorRes.java :
	Added abstract classes to hold interface names for ContextResources.

	* de/schlund/pfixcore/editor/handlers/ProductSelectFinalizer.java (renderDefault): 
	* de/schlund/pfixcore/editor/handlers/ProductSelectHandler.java (handleSubmittedData): 
	* de/schlund/pfixcore/editor/handlers/ProductSelectMandatoryHandler.java (needsData): 
	* de/schlund/pfixcore/editor/handlers/UserAuthHandler.java (handleSubmittedData): 
	(needsData): 
	* de/schlund/pfixcore/example/AdultInfoHandler.java (handleSubmittedData): 
	(retrieveCurrentStatus): (needsData): 
	* de/schlund/pfixcore/example/TShirtHandler.java (handleSubmittedData): 
	(retrieveCurrentStatus): (needsData): 
	* de/schlund/pfixcore/example/TrouserHandler.java (handleSubmittedData): 
	(retrieveCurrentStatus): (needsData): (prerequisitesMet): (isActive): 
	* de/schlund/pfixcore/example/CounterHandler.java (handleSubmittedData): 
	* de/schlund/pfixcore/example/OrderFinalizer.java (renderDefault): 
	Use the stuff above.
	
	* overall: SCN strikes again. :-)
	
	* de/schlund/pfixcore/workflow/ContextResource.java (ContextResource): 
	CAUTION: made interface smaller. No more setProperties(...), setContextResourceManager(...). 
	Just init(props, crm) will do.

	* de/schlund/pfixcore/workflow/ContextResourceImpl.java 
	removed no longer needed methods.
	(getProperties): made protected. 
	(getContextResourceManager): ditto. 
	
	* de/schlund/pfixcore/workflow/ObservableContextResource.java (ObservableContextResourceImpl): 
	Split out into own interface

	* de/schlund/pfixcore/workflow/ObservableContextResourceImpl.java 
	(ObservableContextResourceImpl): now extends ContextResourceImpl and implementes ObservableContextResource

	* de/schlund/pfixcore/workflow/ContextResourceObserver.java: 
	CAUTION: renamed from ObserverContextResource because an
	implementing class doesn't need to be a ContextResource!

2001-11-29-(day)  Jens Lautenbacher  <jtl@schlund.de>

	* examples/core/editor...: Div. xml/xslt and config work for editor.

	* de/schlund/pfixcore/editor/StatusCodes.prop: Remove EMPTY_PRODUCT Scode, as its handled in the 
	IWrapper again

	* de/schlund/pfixcore/editor/handlers/ProductSelectMandatoryHandler.java:
	Dont't handle logout anymore

	* de/schlund/pfixcore/editor/interfaces/ProductSelectMandatory.iwrp: Removed the
	Logout param

	* example/core/xsl/navigation.xsl (pfx:navibutton_impl): Added
	<pfx:argument> subnode to all buttons to add arguments on the fly.
	(pfx:button): added @activeclass, @normalclass, @invisibleclass to
	set a "class" attribute on the <span> surrounding the content.

2001-11-28-(night)  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/xsl/forminput.xsl: Changed <xinp type="submit"> to only use it's 
	contents as the @value when no @value is given before.

	* examples/...: Div. xml/xslt and config work for editor.
	
	* de/schlund/pfixcore/editor/interfaces/ProductSelectMandatory.iwrp: 
	extend from ProductSelect.iwrp, add optional param Logout.

	* de/schlund/pfixcore/editor/handlers/ProductSelectHandler.java (needsData): always
	return false. This is used on the authpage, so we don't _need_ the data _here_. The 
	class ProductSelectMandatoryHandler.java which inherits from this, takes care of getting the product
	for sure on the prodselect page.

	* de/schlund/pfixcore/editor/handlers/ProductSelectFinalizer.java: Added.
	* de/schlund/pfixcore/editor/handlers/ProductSelectMandatoryHandler.java: Added.
	handle "Logout" if given, else check if "Name" is really there, if yes call super.handleSubmit.
	* de/schlund/pfixcore/editor/EditorUser.java (insertStatus): added method
	* de/schlund/pfixcore/editor/EditorProduct.java (insertStatus): added method

	* example/common/conf/pfixlog.xml.in: make StatusCodeFactory less noisy

	* de/schlund/pfixcore/workflow/PageRequestStatus.java (PageRequestStatus): 
	Add Status AUTH_WORKFLOW

	* de/schlund/pfixcore/workflow/AuthContext.java (flowIsRunning):
	Added method, we check for status AUTH_WORKFLOW here too
	(documentFromCurrentStep): Changed to set the status of the authpage according 
	to the the status of the "real" page: if this has status WORKFLOW, set the authpage
	to status AUTH_WORKFLOW.
	(init): don't set the status here.

	* de/schlund/pfixcore/workflow/app/AuthIWrapperState.java (AuthIWrapperState): 
	Added, with twisted logic good for what once was an "authstate".

2001-11-28  Tobias Kraft <tobi@schlund.de>

	* de/schlund/pfixcore/workflow/ContextResourceManager.java (getResource): 
	Added a method call to the ContextResource's init() - method to give
	the current ContextResource the posibility to register at the parent 
	ContextResource's observer. Read the interface javadoc  for more
	details.

2001-11-27  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/resources/EditorSessionStatus.java (EditorSessionStatus): 
	renamed from EditorSessionState to avoid the "State" thing

	* docs/workflow_app.dia: update to current situation
	* docs/generator.dia: update to current situation
	
	* de/schlund/pfixcore/workflow/app/ResdocSimpleFinalizer.java (renderDefault): 
	Added method. Does nothing in this implementation
	(onLoadError): 
	(onWorkError): 
	(onRetrieveStatus): make them all call renderDefault.

	* de/schlund/pfixcore/generator/IHandler.java 
	CAUTION: **** Interface changes! ****
	(handleSubmittedData): removed the ResultDocument from the signature
	(wrapper): ditto.

	* de/schlund/pfixcore/example/TrouserHandler.java: 
	* de/schlund/pfixcore/example/CounterHandler.java: 
	* de/schlund/pfixcore/example/TShirtHandler.java: 
	* de/schlund/pfixcore/example/AdultInfoHandler.java: 
	* de/schlund/pfixcore/editor/handlers/ProductSelectHandler.java: 
	* de/schlund/pfixcore/editor/handlers/UserAuthHandler.java: Changed accordingly

	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java 
	(handleSubmittedData): 
	(retrieveCurrentStatus): changed to use new IHandler interface

2001-11-27  Thomas Stieler  <stieler@schlund.de>

	* de/schlund/pfixcore/workflow/ContextResourceManager.java: 
	* de/schlund/pfixcore/workflow/ContextResourceImpl.java: 
	* de/schlund/pfixcore/workflow/ContextResource.java:

	Added method "void setContextResourceManager(ContextResourceManager crm)"
	Calling this method in constructor of class ContextResourceManager.

	* de/schlund/pfixcore/workflow/ObserverContextResource.java: 
	* de/schlund/pfixcore/workflow/ObservableContextResource.java: 

	Added the class ObservableContextResource.java and the interface
	ObserverContextResource.java. 
	
2001-11-27-(night)  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/build/create_apacheconf_jserv.xsl: Added <passthrough> element to 
	construct "Alias <path> <realpath>" constructs in apache.conf
	* example/jserv/apache.conf.in: Use it.

	* example/core/editor/xml/two_frames_deaktiv.xml: 
	* example/core/editor/xml/two_frames.xml: 
	* example/core/editor/xml/three_frames.xml: 
	bug fixes.
	
	* de/schlund/pfixcore/editor/StatusCodes.prop: added SCode fpr product selection

	* de/schlund/pfixcore/editor/handlers/ProductSelectHandler.java (handleSubmittedData): Added.

	* de/schlund/pfixcore/editor/EditorUserFactory.java (readFile): add logging

	* example/common/conf/userdata.xml: changed pwd to "pass"

	* de/schlund/pfixcore/editor/handlers/UserAuthHandler.java
	(handleSubmittedData): bug fixes, make login really work

	* de/schlund/pfixcore/editor/interfaces/ProductSelectMandatory.iwrp: 
	Added as mandatory version of product selection for page prodselect

	* example/core/editor/conf/config.prop.in: bug fixes.

	* example/core/xsl/forminput.xsl: Added <pfx:xinp type="submit">, 
	uses content as value for <input type="submit">

	* example/core/editor/txt/styles.xml: defined CSS

	* example/core/editor/txt/pages/main_editoruserauth.xml: added CSS

	* example/Makefile (common/dyntxt/statusmessages.xml): Bug fixes

2001-11-26  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/example/TShirtHandler.java (retrieveCurrentStatus): 
	* de/schlund/pfixcore/example/TrouserHandler.java (retrieveCurrentStatus): 
	* de/schlund/pfixcore/example/AdultInfoHandler.java (retrieveCurrentStatus): 
	* de/schlund/pfixcore/editor/handlers/UserAuthHandler.java (retrieveCurrentStatus): 
	* de/schlund/pfixcore/example/CounterHandler.java (retrieveCurrentStatus): 
	* de/schlund/pfixcore/generator/IHandler.java (retrieveCurrentStatus): renamed from 
	insertCurrentStatus(...)

	* de/schlund/pfixcore/workflow/app/ResdocSimpleFinalizer.java (onRetrieveStatus): 
	* de/schlund/pfixcore/workflow/app/ResdocFinalizer.java (onRetrieveStatus): 
	* de/schlund/pfixcore/example/OrderFinalizer.java (onInsertStatus): renamed
	from OnInsertStatus(...)

	* de/schlund/pfixcore/workflow/app/IWrapperContainer.java (retrieveCurrentStatus): 
	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java (retrieveCurrentStatus): 
	renamed from insertCurrentStatus()
	
	* de/schlund/pfixcore/workflow/app/DefaultIWrapperState.java (getDocument): 
	change container.insertCurrentStatus -> container.retrieveCurrentStatus
	rfinal.OnInsertStatus -> rfinal.OnRetrieveStatus

	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java (insertCurrentStatus): 
	BUGFIX: changed to only work on selectedwrappers, not currentgroup.

2001-11-25  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/StatusCodes.prop: added
	* example/common/conf/factory.prop.in: added above file
	
	* example/core/editor/conf/config.prop.in: use AuthContext
	* de/schlund/pfixcore/editor/interfaces/UserAuth.iwrp: added
	* de/schlund/pfixcore/editor/handlers/UserAuthHandler.java: added
	* example/common/conf/pustefix.prop.in: added EditorSessionState
	(== "editorsession") context resource.
	* example/core/editor/conf/config.prop.in: ditto

2001-11-25-(night)  Jens Lautenbacher  <jtl@schlund.de>

	* example/core/editor/txt/pages/main_bilder.xml: 
	* example/core/editor/txt/pages/main_common.xml: 
	* example/core/editor/txt/pages/main_editoruserauth.xml: 
	* example/core/editor/txt/pages/main_editoruserdata.xml: 
	* example/core/editor/txt/pages/main_editorusermanager.xml: 
	* example/core/editor/txt/pages/main_home.xml: 
	* example/core/editor/txt/pages/main_includes.xml: 
	* example/core/editor/txt/pages/main_lockmanager.xml: 
	* example/core/editor/txt/pages/main_prodselect.xml: 
	* example/core/editor/txt/pages/main_sessionmanager.xml: 
	* example/core/editor/txt/pages/main_targets.xml: 
	* example/core/editor/xsl/metatags.xsl: 
	* example/core/editor/xsl/custommetatags.xsl: 
	* example/core/editor/xsl/custommaster.xsl: 
	* example/core/editor/txt/styles.xml: 
	* example/core/editor/txt/navigation.xml: 
	* example/core/editor/xml/two_frames_deaktiv.xml: 
	* example/core/editor/xml/two_frames.xml: 
	* example/core/editor/xml/three_frames.xml: 
	Added.
	
	* example/core/build/create_projects.xsl: Bug fixes for building *.prj

	* example/common/conf/factory.prop.in: 
	Added EditorUserFactory
	Added EditorProductFactory

	* example/common/conf/products.prj.in: 
	Added with product sample1
	
	* example/common/conf/userdata.xml: 
	Added with sample user admin, pwd admin

	* example/core/editor/conf/navigation.xml: 
	* example/core/editor/conf/depend.xml.in: 
	* example/core/editor/conf/config.prop.in: 
	Added.
	
	* lib/pfixxml-2.0.2-jserv.jar: updated from 2.0.1-jserv

	* de/schlund/pfixcore/editor/*.java: removed old editor files again. Doesn't work that way.
	
	* de/schlund/pfixcore/editor/EditorUser.java: 
	* de/schlund/pfixcore/editor/EditorUserFactory.java: 
	* de/schlund/pfixcore/editor/EditorProductFactory.java:
	* de/schlund/pfixcore/editor/EditorProduct.java: 
	* de/schlund/pfixcore/editor/PfixcoreServlet.java: 
	Added first classes of new editor.

2001-11-22  Jens Lautenbacher  <jtl@schlund.de>
	* docs/workflow_app.dia: update to current situation
	* docs/generator.dia: update to current situation
	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java (IWrapperSimpleContainer): 
	changed to initialize a RequestData instance. Use it.

	* de/schlund/pfixcore/generator/IWrapperImpl.java (load): 
	* de/schlund/pfixcore/generator/IWrapper.java (load): 
	* de/schlund/pfixcore/generator/IWrapperIndexedParam.java (initValueFromRequest): 
	* de/schlund/pfixcore/generator/IWrapperParamInfo.java (initValueFromRequest): 
	use RequestData instead of HttpServletRequest everywhere.

	* de/schlund/pfixcore/generator/RequestData.java (RequestData): Added
	* de/schlund/pfixcore/workflow/app/RequestDataImpl.java (RequestDataImpl): Added.  
	Moved the parsing of __DATA/__CMD stuff encoded in parameter names
	into an own class.  This class get's parameters from
	the normal key value request parameters _and_ from magic param names.

	* example/common/conf/pustefix.prop.in: statusmessages -> statusmessages.xml

	* example/Makefile (common/dyntxt/statusmessages.xml): update the rule to comply with new name.

2001-11-21  Jens Lautenbacher  <jtl@schlund.de>

	* example/common/conf/pustefix.prop.in: register "counter" => ContextCounter ContextResource

	* example/sample1/conf/config.prop.in: added "counter" ContextResource, added OrderFinalizer to order page

	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java (continueSubmit): 
	return true whenever the selectedwrappers != currentgroup ( that is
	just whenever you restrict the submit to a subset of
	handlers. You never want to advance the current display in that
	case.)

	* example/sample1/txt/pages/main_order.xml: added Counter as an example for a restricted handler submit.

	* de/schlund/pfixcore/example/CounterHandler.java (insertCurrentStatus): new file

	* de/schlund/pfixcore/example/ContextCounter.java (toString): new file

	* de/schlund/pfixcore/example/Counter.iwrp: new file

	* de/schlund/pfixcore/example/OrderFinalizer.java (OrderFinalizer): new file

2001-11-21  Thomas Stieler  <stieler@earth2.schlund.de>

	* example/core/xsl/utils.xsl (pfx:maincontent): added postfix, default value .xml 

2001-11-21  Jens Lautenbacher  <jtl@schlund.de>

	* docs/IWRapper_XML_Description_Language.txt: added more documentation

2001-11-19  Jens Lautenbacher  <jtl@schlund.de>

	* docs/Magic_Parameter_Names.txt: added documentation

	* docs/workflow_app.dia: update to current situation

	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java (initIWrappers): 
	Hopefully changed the form of the __CMD stuff for the last time:
	now it looks like this:

	<ignored stuff>__CMD[<pagename>]:<name>:<param>:<ignored stuff>
	this is to bind cmds to a page so they won't apply after a switch to another page during workflow.

	Now we have 4 commands:
	GROUP_SWITCH_NEXT = "__CMD[" + name + "]:SELGRP:NEXT:";  
	GROUP_SWITCH_PREV = "__CMD[" + name + "]:SELGRP:PREV:";  
	GROUP_SWITCH_IDX  = "__CMD[" + name + "]:SELGRP:";  
	SELECT_WRAPPER    = "__CMD[" + name + "]:SELWRP:";  

	and a hidden parameter that's set to the current group that was displayed:
	GROUP_CURR        = "__currentindex[" + name + "]";

	Here "name" stands for the page name. "SELWRP" is renamed from "SEL" mentioned below. 
	The first two cmds are complete, the third needs an additional integer to select the group index, 
	e.g. "__CMD[" + name + "]:SELGRP:1:" (Note the trailing ":" again);
	
	* de/schlund/pfixcore/workflow/app/IWrapperContainer.java: remove loadIWrappers(); 

	* de/schlund/pfixcore/workflow/app/DefaultIWrapperState.java (getDocument): 
	remove the call to container.loadIWrappers()

	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java
	(getIWrappers): removed
	(getCurrentIWrappers): removed
	(IWrapperSimpleContainer): added lazy calling of loadIWrappers()
	and splitIWrappers() from inside the relevant methods.

	* de/schlund/pfixcore/workflow/app/IWrapperContainer.java (getIWrappers): removed
	(splitIWrappers): ditto
	(getCurrentIWrappers): ditto

	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java (checkForRestrictedCalling): 
	new private method called from splitIWrappers(). This handles restricting the submit to specified 
	wrappers. This is done via special named parameters like this:
	<anything ignored>__CMD:SEL:<prefix for wrapper>:<anything ignored>     
	NOTE: the trailing ":" after the data is mandatory, even if there's nothing following behind.
	NOTE2: this is transparent: you can add more than one CMD:SEL section to us more than one interface.
	(splitIWrappers): made private. it will always be called from initIWrappers() now. May be changed back
	if it turns ouzt to be too much of a performance hit.

	* de/schlund/pfixcore/workflow/app/DefaultIWrapperState.java 
	(isAccessible): changed to use IWrapperContainer instead of IHandlerAction
	(getDocument): ditto.

	* de/schlund/pfixcore/workflow/app/IWrapperSimpleContainer.java 
	(isPageAccessible): 
	(areHandlerActive): 
	(needsData): 
	(handleSubmittedData): 
	(insertCurrentStatus): all added from IHandlerAction

	* de/schlund/pfixcore/workflow/app/IHandlerAction.java
	* de/schlund/pfixcore/workflow/app/IHandlerSimpleAction.java
	* de/schlund/pfixcore/workflow/app/IHandlerActionFactory.java: 
	removed. Functionality is now in IWrapperContainer
	

2001-11-18  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/generator/IWrapperParamInfo.java (initValueFromRequest): 
	Added the ability to scan for param values encoded in parameter names (this is of use   
	for submit buttons also submitting a typed parameter. The magic format for a parameter name
	is like this: <anything ignored>__DATA:<paramname>:<paramvalue>:<anything ignored>
	NOTE: the trailing ":" after the data is mandatory, even if there's nothing following behind.
	NOTE2: this is transparent: you can add more than one DATA section, even with the same name.

2001-11-16  Jens Lautenbacher  <jtl@schlund.de>

	* de/schlund/pfixcore/editor/*.java
	imported Editor files. This does not compile at all currently.
	
